(function(n){function r(t,i,r){var u,f;if(r=r||{},r.axesDefaults=r.axesDefaults||{},r.legend=r.legend||{},r.seriesDefaults=r.seriesDefaults||{},u=!1,r.seriesDefaults.renderer==n.jqplot.DonutRenderer)u=!0;else if(r.series)for(f=0;f<r.series.length;f++)r.series[f].renderer==n.jqplot.DonutRenderer&&(u=!0);u&&(r.axesDefaults.renderer=n.jqplot.DonutAxisRenderer,r.legend.renderer=n.jqplot.DonutLegendRenderer,r.legend.preDraw=!0,r.seriesDefaults.pointLabels={show:!1})}function u(){for(var i,t=1;t<this.series.length;t++)if(!this.series[t]._previousSeries.length)for(i=0;i<t;i++)this.series[t].renderer.constructor==n.jqplot.DonutRenderer&&this.series[i].renderer.constructor==n.jqplot.DonutRenderer&&this.series[t]._previousSeries.push(this.series[i]);for(t=0;t<this.series.length;t++)this.series[t].renderer.constructor==n.jqplot.DonutRenderer&&(this.series[t]._numberSeries=this.series.length,this.series[t].highlightMouseOver&&(this.series[t].highlightMouseDown=!1))}function f(){for(var t=0;t<this.series.length;t++)this.series[t].seriesColors=this.seriesColors,this.series[t].colorGenerator=n.jqplot.colorGenerator}function i(n,t,i){var r=n.series[t],u=n.plugins.donutRenderer.highlightCanvas;u._ctx.clearRect(0,0,u._ctx.canvas.width,u._ctx.canvas.height);r._highlightedPoint=i;n.plugins.donutRenderer.highlightedSeriesIndex=t;r.renderer.drawSlice.call(r,u._ctx,r._sliceAngles[i][0],r._sliceAngles[i][1],r.highlightColors[i],!1)}function t(n){var i=n.plugins.donutRenderer.highlightCanvas,t;for(i._ctx.clearRect(0,0,i._ctx.canvas.width,i._ctx.canvas.height),t=0;t<n.series.length;t++)n.series[t]._highlightedPoint=null;n.plugins.donutRenderer.highlightedSeriesIndex=null;n.target.trigger("jqplotDataUnhighlight")}function e(n,r,u,f,e){var o,h,s;f?(o=[f.seriesIndex,f.pointIndex,f.data],h=jQuery.Event("jqplotDataMouseOver"),h.pageX=n.pageX,h.pageY=n.pageY,e.target.trigger(h,o),!e.series[o[0]].highlightMouseOver||o[0]==e.plugins.donutRenderer.highlightedSeriesIndex&&o[1]==e.series[o[0]]._highlightedPoint||(s=jQuery.Event("jqplotDataHighlight"),s.which=n.which,s.pageX=n.pageX,s.pageY=n.pageY,e.target.trigger(s,o),i(e,o[0],o[1]))):f==null&&t(e)}function o(n,r,u,f,e){var o,s;f?(o=[f.seriesIndex,f.pointIndex,f.data],!e.series[o[0]].highlightMouseDown||o[0]==e.plugins.donutRenderer.highlightedSeriesIndex&&o[1]==e.series[o[0]]._highlightedPoint||(s=jQuery.Event("jqplotDataHighlight"),s.which=n.which,s.pageX=n.pageX,s.pageY=n.pageY,e.target.trigger(s,o),i(e,o[0],o[1]))):f==null&&t(e)}function s(n,i,r,u,f){var e=f.plugins.donutRenderer.highlightedSeriesIndex;e!=null&&f.series[e].highlightMouseDown&&t(f)}function h(n,t,i,r,u){if(r){var e=[r.seriesIndex,r.pointIndex,r.data],f=jQuery.Event("jqplotDataClick");f.which=n.which;f.pageX=n.pageX;f.pageY=n.pageY;u.target.trigger(f,e)}}function c(n,i,r,u,f){var s,o,e;u&&(s=[u.seriesIndex,u.pointIndex,u.data],o=f.plugins.donutRenderer.highlightedSeriesIndex,o!=null&&f.series[o].highlightMouseDown&&t(f),e=jQuery.Event("jqplotDataRightClick"),e.which=n.which,e.pageX=n.pageX,e.pageY=n.pageY,f.target.trigger(e,s))}function l(){var i,r;this.plugins.donutRenderer&&this.plugins.donutRenderer.highlightCanvas&&(this.plugins.donutRenderer.highlightCanvas.resetCanvas(),this.plugins.donutRenderer.highlightCanvas=null);this.plugins.donutRenderer={highlightedSeriesIndex:null};this.plugins.donutRenderer.highlightCanvas=new n.jqplot.GenericCanvas;i=n(this.targetId+" .jqplot-data-label");i.length?n(i[0]).before(this.plugins.donutRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-donutRenderer-highlight-canvas",this._plotDimensions,this)):this.eventCanvas._elem.before(this.plugins.donutRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-donutRenderer-highlight-canvas",this._plotDimensions,this));r=this.plugins.donutRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(n){t(n.data.plot)})}n.jqplot.DonutRenderer=function(){n.jqplot.LineRenderer.call(this)};n.jqplot.DonutRenderer.prototype=new n.jqplot.LineRenderer;n.jqplot.DonutRenderer.prototype.constructor=n.jqplot.DonutRenderer;n.jqplot.DonutRenderer.prototype.init=function(t,i){var v,a;if(this.diameter=null,this.innerDiameter=null,this.thickness=null,this.padding=20,this.sliceMargin=0,this.ringMargin=null,this.fill=!0,this.shadowOffset=2,this.shadowAlpha=.07,this.shadowDepth=5,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.dataLabels="percent",this.showDataLabels=!1,this.dataLabelFormatString=null,this.dataLabelThreshold=3,this.dataLabelPositionFactor=.4,this.dataLabelNudge=0,this.startAngle=0,this.tickRenderer=n.jqplot.DonutTickRenderer,this._drawData=!0,this._type="donut",t.highlightMouseDown&&t.highlightMouseOver==null&&(t.highlightMouseOver=!1),n.extend(!0,this,t),this.diameter!=null&&(this.diameter=this.diameter-this.sliceMargin),this._diameter=null,this._innerDiameter=null,this._radius=null,this._innerRadius=null,this._thickness=null,this._previousSeries=[],this._numberSeries=1,this._sliceAngles=[],this._highlightedPoint=null,this.highlightColors.length==0)for(v=0;v<this.seriesColors.length;v++){var y=n.jqplot.getColorComponents(this.seriesColors[v]),r=[y[0],y[1],y[2]],p=r[0]+r[1]+r[2];for(a=0;a<3;a++)r[a]=p>570?r[a]*.8:r[a]+.3*(255-r[a]),r[a]=parseInt(r[a],10);this.highlightColors.push("rgb("+r[0]+","+r[1]+","+r[2]+")")}i.postParseOptionsHooks.addOnce(f);i.postInitHooks.addOnce(u);i.eventListenerHooks.addOnce("jqplotMouseMove",e);i.eventListenerHooks.addOnce("jqplotMouseDown",o);i.eventListenerHooks.addOnce("jqplotMouseUp",s);i.eventListenerHooks.addOnce("jqplotClick",h);i.eventListenerHooks.addOnce("jqplotRightClick",c);i.postDrawHooks.addOnce(l)};n.jqplot.DonutRenderer.prototype.setGridData=function(){var t=[],i=[],f=this.startAngle/180*Math.PI,r=0,u,n;for(this._drawData=!1,n=0;n<this.data.length;n++)this.data[n][1]!=0&&(this._drawData=!0),t.push(this.data[n][1]),i.push([this.data[n][0]]),n>0&&(t[n]+=t[n-1]),r+=this.data[n][1];for(u=Math.PI*2/t[t.length-1],n=0;n<t.length;n++)i[n][1]=t[n]*u,i[n][2]=this.data[n][1]/r;this.gridData=i};n.jqplot.DonutRenderer.prototype.makeGridData=function(n){var i=[],r=[],u=0,e=this.startAngle/180*Math.PI,f,t;for(this._drawData=!1,t=0;t<n.length;t++)this.data[t][1]!=0&&(this._drawData=!0),i.push(n[t][1]),r.push([n[t][0]]),t>0&&(i[t]+=i[t-1]),u+=n[t][1];for(f=Math.PI*2/i[i.length-1],t=0;t<i.length;t++)r[t][1]=i[t]*f,r[t][2]=n[t][1]/u;return r};n.jqplot.DonutRenderer.prototype.drawSlice=function(n,t,i,r,u){function s(){(i>6.282+this.startAngle&&(i=6.282+this.startAngle,t>i&&(t=6.281+this.startAngle)),t>=i)||(n.beginPath(),n.fillStyle=r,n.strokeStyle=r,n.arc(0,0,o,t,i,!1),n.lineTo(e*Math.cos(i),e*Math.sin(i)),n.arc(0,0,e,i,t,!0),n.closePath(),h?n.fill():n.stroke())}var o=this._diameter/2,e=o-this._thickness,h=this.fill,f;if(n.save(),n.translate(this._center[0],this._center[1]),u)for(f=0;f<this.shadowDepth;f++)n.save(),n.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI)),s();else s();if(u)for(f=0;f<this.shadowDepth;f++)n.restore();n.restore()};n.jqplot.DonutRenderer.prototype.draw=function(t,i,r,u){var a=r!=undefined?r:{},o=0,v=0,s=1,e,ut,ht,l,ft,f,h,p,c,k,y;if(r.legendInfo&&r.legendInfo.placement=="insideGrid"){e=r.legendInfo;switch(e.location){case"nw":o=e.width+e.xoffset;break;case"w":o=e.width+e.xoffset;break;case"sw":o=e.width+e.xoffset;break;case"ne":o=e.width+e.xoffset;s=-1;break;case"e":o=e.width+e.xoffset;s=-1;break;case"se":o=e.width+e.xoffset;s=-1;break;case"n":v=e.height+e.yoffset;break;case"s":v=e.height+e.yoffset;s=-1}}var ct=a.shadow!=undefined?a.shadow:this.shadow,lt=a.showLine!=undefined?a.showLine:this.showLine,at=a.fill!=undefined?a.fill:this.fill,g=t.canvas.width,nt=t.canvas.height,ot=g-o-2*this.padding,st=nt-v-2*this.padding,tt=Math.min(ot,st),it=tt,rt=this.ringMargin==null?this.sliceMargin*2:this.ringMargin;for(f=0;f<this._previousSeries.length;f++)it-=2*this._previousSeries[f]._thickness+2*rt;if(this._diameter=this.diameter||it,this.innerDiameter!=null?(ut=this._numberSeries>1&&this.index>0?this._previousSeries[0]._diameter:this._diameter,this._thickness=this.thickness||(ut-this.innerDiameter-2*rt*this._numberSeries)/this._numberSeries/2):this._thickness=this.thickness||tt/2/(this._numberSeries+1)*.85,ht=this._radius=this._diameter/2,this._innerRadius=this._radius-this._thickness,l=this.startAngle/180*Math.PI,this._center=[(g-s*o)/2+s*o,(nt-s*v)/2+s*v],this.shadow)for(ft="rgba(0,0,0,"+this.shadowAlpha+")",f=0;f<i.length;f++)h=f==0?l:i[f-1][1]+l,h+=this.sliceMargin/180*Math.PI,this.renderer.drawSlice.call(this,t,h,i[f][1]+l,ft,!0);for(f=0;f<i.length;f++)if(h=f==0?l:i[f-1][1]+l,h+=this.sliceMargin/180*Math.PI,p=i[f][1]+l,this._sliceAngles.push([h,p]),this.renderer.drawSlice.call(this,t,h,p,this.seriesColors[f],!1),this.showDataLabels&&i[f][2]*100>=this.dataLabelThreshold){k=(h+p)/2;this.dataLabels=="label"?(c=this.dataLabelFormatString||"%s",y=n.jqplot.sprintf(c,i[f][0])):this.dataLabels=="value"?(c=this.dataLabelFormatString||"%d",y=n.jqplot.sprintf(c,this.data[f][1])):this.dataLabels=="percent"?(c=this.dataLabelFormatString||"%d%%",y=n.jqplot.sprintf(c,i[f][2]*100)):this.dataLabels.constructor==Array&&(c=this.dataLabelFormatString||"%s",y=n.jqplot.sprintf(c,this.dataLabels[f]));var et=this._innerRadius+this._thickness*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,w=this._center[0]+Math.cos(k)*et+this.canvas._offsets.left,b=this._center[1]+Math.sin(k)*et+this.canvas._offsets.top,d=n('<span class="jqplot-donut-series jqplot-data-label" style="position:absolute;">'+y+"<\/span>").insertBefore(u.eventCanvas._elem);w-=d.width()/2;b-=d.height()/2;w=Math.round(w);b=Math.round(b);d.css({left:w,top:b})}};n.jqplot.DonutAxisRenderer=function(){n.jqplot.LinearAxisRenderer.call(this)};n.jqplot.DonutAxisRenderer.prototype=new n.jqplot.LinearAxisRenderer;n.jqplot.DonutAxisRenderer.prototype.constructor=n.jqplot.DonutAxisRenderer;n.jqplot.DonutAxisRenderer.prototype.init=function(t){this.tickRenderer=n.jqplot.DonutTickRenderer;n.extend(!0,this,t);this._dataBounds={min:0,max:100};this.min=0;this.max=100;this.showTicks=!1;this.ticks=[];this.showMark=!1;this.show=!1};n.jqplot.DonutLegendRenderer=function(){n.jqplot.TableLegendRenderer.call(this)};n.jqplot.DonutLegendRenderer.prototype=new n.jqplot.TableLegendRenderer;n.jqplot.DonutLegendRenderer.prototype.constructor=n.jqplot.DonutLegendRenderer;n.jqplot.DonutLegendRenderer.prototype.init=function(t){this.numberRows=null;this.numberColumns=null;n.extend(!0,this,t)};n.jqplot.DonutLegendRenderer.prototype.draw=function(){var d=this,w,t,r,u,a,f,v,e,y,p,b,o;if(this.show){w=this._series;t="position:absolute;";t+=this.background?"background:"+this.background+";":"";t+=this.border?"border:"+this.border+";":"";t+=this.fontSize?"font-size:"+this.fontSize+";":"";t+=this.fontFamily?"font-family:"+this.fontFamily+";":"";t+=this.textColor?"color:"+this.textColor+";":"";t+=this.marginTop!=null?"margin-top:"+this.marginTop+";":"";t+=this.marginBottom!=null?"margin-bottom:"+this.marginBottom+";":"";t+=this.marginLeft!=null?"margin-left:"+this.marginLeft+";":"";t+=this.marginRight!=null?"margin-right:"+this.marginRight+";":"";this._elem=n('<table class="jqplot-table-legend" style="'+t+'"><\/table>');var h=!1,c=!1,i,s,l=w[0],k=new n.jqplot.ColorGenerator(l.seriesColors);if(l.show)for(r=l.data,this.numberRows?(i=this.numberRows,s=this.numberColumns?this.numberColumns:Math.ceil(r.length/i)):this.numberColumns?(s=this.numberColumns,i=Math.ceil(r.length/this.numberColumns)):(i=r.length,s=1),o=0,u=0;u<i;u++)for(f=c?n('<tr class="jqplot-table-legend"><\/tr>').prependTo(this._elem):n('<tr class="jqplot-table-legend"><\/tr>').appendTo(this._elem),a=0;a<s;a++)o<r.length&&(y=this.labels[o]||r[o][0].toString(),b=k.next(),h=c?u==i-1?!1:!0:u>0?!0:!1,p=h?this.rowSpacing:"0",v=n('<td class="jqplot-table-legend" style="text-align:center;padding-top:'+p+';"><div><div class="jqplot-table-legend-swatch" style="border-color:'+b+';"><\/div><\/div><\/td>'),e=n('<td class="jqplot-table-legend" style="padding-top:'+p+';"><\/td>'),this.escapeHtml?e.text(y):e.html(y),c?(e.prependTo(f),v.prependTo(f)):(v.appendTo(f),e.appendTo(f)),h=!0),o++}return this._elem};n.jqplot.preInitHooks.push(r);n.jqplot.DonutTickRenderer=function(){n.jqplot.AxisTickRenderer.call(this)};n.jqplot.DonutTickRenderer.prototype=new n.jqplot.AxisTickRenderer;n.jqplot.DonutTickRenderer.prototype.constructor=n.jqplot.DonutTickRenderer})(jQuery);