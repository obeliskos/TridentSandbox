(function(n){function t(){n.jqplot.GenericCanvas.call(this);this.isDragging=!1;this.isOver=!1;this._neighbor;this._cursors=[]}function i(t,i){var o=t.series[i.seriesIndex],u=o.plugins.dragable,e=o.markerRenderer,f=u.markerRenderer,h,c;if(f.style=e.style,f.lineWidth=e.lineWidth+2.5,f.size=e.size+5,!u.color){var r=n.jqplot.getColorComponents(e.color),s=[r[0],r[1],r[2]],l=r[3]>=.6?r[3]*.6:r[3]*(2-r[3]);u.color="rgba("+s[0]+","+s[1]+","+s[2]+","+l+")"}f.color=u.color;f.init();h=i.pointIndex>0?i.pointIndex-1:0;c=i.pointIndex+2;u._gridData=o.gridData.slice(h,c)}function r(n,t,i,r,u){var a,f;if(u.plugins.dragable.dragCanvas.isDragging){var f=u.plugins.dragable.dragCanvas,e=f._neighbor,s=u.series[e.seriesIndex],o=s.plugins.dragable,p=s.gridData,h=o.constrainTo=="y"?e.gridData[0]:t.x,c=o.constrainTo=="x"?e.gridData[1]:t.y,v=s._xaxis.series_p2u(h),y=s._yaxis.series_p2u(c),l=f._ctx;l.clearRect(0,0,l.canvas.width,l.canvas.height);e.pointIndex>0?o._gridData[1]=[h,c]:o._gridData[0]=[h,c];u.series[e.seriesIndex].draw(f._ctx,{gridData:o._gridData,shadow:!1,preventJqPlotSeriesDrawTrigger:!0,color:o.color,markerOptions:{color:o.color,shadow:!1},trendline:{show:!1}});u.target.trigger("jqplotSeriesPointChange",[e.seriesIndex,e.pointIndex,[v,y],[h,c]])}else r!=null?(a=u.series[r.seriesIndex],a.isDragable&&(f=u.plugins.dragable.dragCanvas,f.isOver||(f._cursors.push(n.target.style.cursor),n.target.style.cursor="pointer"),f.isOver=!0)):r==null&&(f=u.plugins.dragable.dragCanvas,f.isOver&&(n.target.style.cursor=f._cursors.pop(),f.isOver=!1))}function u(n,t,r,u,f){var e=f.plugins.dragable.dragCanvas,o,h,s;e._cursors.push(n.target.style.cursor);u!=null?(o=f.series[u.seriesIndex],h=o.plugins.dragable,o.isDragable&&!e.isDragging&&(e._neighbor=u,e.isDragging=!0,i(f,u),h.markerRenderer.draw(o.gridData[u.pointIndex][0],o.gridData[u.pointIndex][1],e._ctx),n.target.style.cursor="move",f.target.trigger("jqplotDragStart",[u.seriesIndex,u.pointIndex,t,r]))):(s=e._ctx,s.clearRect(0,0,s.canvas.width,s.canvas.height),e.isDragging=!1)}function f(n,t,i,r,u){var f,s;if(u.plugins.dragable.dragCanvas.isDragging){f=u.plugins.dragable.dragCanvas;s=f._ctx;s.clearRect(0,0,s.canvas.width,s.canvas.height);f.isDragging=!1;var e=f._neighbor,o=u.series[e.seriesIndex],h=o.plugins.dragable,c=h.constrainTo=="y"?e.data[0]:i[o.xaxis],l=h.constrainTo=="x"?e.data[1]:i[o.yaxis];o.data[e.pointIndex][0]=c;o.data[e.pointIndex][1]=l;u.drawSeries({preventJqPlotSeriesDrawTrigger:!0},e.seriesIndex);f._neighbor=null;n.target.style.cursor=f._cursors.pop();u.target.trigger("jqplotDragStop",[t,i])}}n.jqplot.Dragable=function(t){this.markerRenderer=new n.jqplot.MarkerRenderer({shadow:!1});this.shapeRenderer=new n.jqplot.ShapeRenderer;this.isDragging=!1;this.isOver=!1;this._ctx;this._elem;this._point;this._gridData;this.color;this.constrainTo="none";n.extend(!0,this,t)};t.prototype=new n.jqplot.GenericCanvas;t.prototype.constructor=t;n.jqplot.Dragable.parseOptions=function(t,i){var r=i||{};this.plugins.dragable=new n.jqplot.Dragable(r.dragable);this.isDragable=n.jqplot.config.enablePlugins};n.jqplot.Dragable.postPlotDraw=function(){this.plugins.dragable&&this.plugins.dragable.highlightCanvas&&(this.plugins.dragable.highlightCanvas.resetCanvas(),this.plugins.dragable.highlightCanvas=null);this.plugins.dragable={previousCursor:"auto",isOver:!1};this.plugins.dragable.dragCanvas=new t;this.eventCanvas._elem.before(this.plugins.dragable.dragCanvas.createElement(this._gridPadding,"jqplot-dragable-canvas",this._plotDimensions,this));var n=this.plugins.dragable.dragCanvas.setContext()};n.jqplot.preParseSeriesOptionsHooks.push(n.jqplot.Dragable.parseOptions);n.jqplot.postDrawHooks.push(n.jqplot.Dragable.postPlotDraw);n.jqplot.eventListenerHooks.push(["jqplotMouseMove",r]);n.jqplot.eventListenerHooks.push(["jqplotMouseDown",u]);n.jqplot.eventListenerHooks.push(["jqplotMouseUp",f])})(jQuery);