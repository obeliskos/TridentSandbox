(function(n){function i(t,i,r){var u,f;if(r=r||{},r.axesDefaults=r.axesDefaults||{},r.grid=r.grid||{},r.legend=r.legend||{},r.seriesDefaults=r.seriesDefaults||{},u=!1,r.seriesDefaults.renderer===n.jqplot.PyramidRenderer)u=!0;else if(r.series)for(f=0;f<r.series.length;f++)r.series[f].renderer===n.jqplot.PyramidRenderer&&(u=!0);u&&(r.axesDefaults.renderer=n.jqplot.PyramidAxisRenderer,r.grid.renderer=n.jqplot.PyramidGridRenderer,r.seriesDefaults.pointLabels={show:!1})}function r(){this.plugins.pyramidRenderer&&this.plugins.pyramidRenderer.highlightCanvas&&(this.plugins.pyramidRenderer.highlightCanvas.resetCanvas(),this.plugins.pyramidRenderer.highlightCanvas=null);this.plugins.pyramidRenderer={highlightedSeriesIndex:null};this.plugins.pyramidRenderer.highlightCanvas=new n.jqplot.GenericCanvas;this.eventCanvas._elem.before(this.plugins.pyramidRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pyramidRenderer-highlight-canvas",this._plotDimensions,this));this.plugins.pyramidRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(n){t(n.data.plot)})}function u(n,t,i,r){var u=n.series[t],f=n.plugins.pyramidRenderer.highlightCanvas,e;f._ctx.clearRect(0,0,f._ctx.canvas.width,f._ctx.canvas.height);u._highlightedPoint=i;n.plugins.pyramidRenderer.highlightedSeriesIndex=t;e={fillStyle:u.highlightColors[i],fillRect:!1};u.renderer.shapeRenderer.draw(f._ctx,r,e);u.synchronizeHighlight!==!1&&n.series.length>=u.synchronizeHighlight&&u.synchronizeHighlight!==t&&(u=n.series[u.synchronizeHighlight],e={fillStyle:u.highlightColors[i],fillRect:!1},u.renderer.shapeRenderer.draw(f._ctx,u._barPoints[i],e));f=null}function t(n){var t=n.plugins.pyramidRenderer.highlightCanvas,i;for(t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height),i=0;i<n.series.length;i++)n.series[i]._highlightedPoint=null;n.plugins.pyramidRenderer.highlightedSeriesIndex=null;n.target.trigger("jqplotDataUnhighlight");t=null}function f(n,i,r,f,e){var o,h,s;f?(o=[f.seriesIndex,f.pointIndex,f.data],h=jQuery.Event("jqplotDataMouseOver"),h.pageX=n.pageX,h.pageY=n.pageY,e.target.trigger(h,o),!e.series[o[0]].highlightMouseOver||o[0]==e.plugins.pyramidRenderer.highlightedSeriesIndex&&o[1]==e.series[o[0]]._highlightedPoint||(s=jQuery.Event("jqplotDataHighlight"),s.which=n.which,s.pageX=n.pageX,s.pageY=n.pageY,e.target.trigger(s,o),u(e,f.seriesIndex,f.pointIndex,f.points))):f==null&&t(e)}n.jqplot.PyramidAxisRenderer===undefined&&n.ajax({url:n.jqplot.pluginLocation+"jqplot.pyramidAxisRenderer.js",dataType:"script",async:!1});n.jqplot.PyramidGridRenderer===undefined&&n.ajax({url:n.jqplot.pluginLocation+"jqplot.pyramidGridRenderer.js",dataType:"script",async:!1});n.jqplot.PyramidRenderer=function(){n.jqplot.LineRenderer.call(this)};n.jqplot.PyramidRenderer.prototype=new n.jqplot.LineRenderer;n.jqplot.PyramidRenderer.prototype.constructor=n.jqplot.PyramidRenderer;n.jqplot.PyramidRenderer.prototype.init=function(t,i){var o,e,s,u,h;if(t=t||{},this._type="pyramid",this.barPadding=10,this.barWidth=null,this.fill=!0,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.highlightThreshold=2,this.synchronizeHighlight=!1,this.offsetBars=!1,t.highlightMouseDown&&t.highlightMouseOver==null&&(t.highlightMouseOver=!1),this.side="right",n.extend(!0,this,t),this._highlightThreshold=this.side==="left"?[[-this.highlightThreshold,0],[-this.highlightThreshold,0],[0,0],[0,0]]:[[0,0],[0,0],[this.highlightThreshold,0],[this.highlightThreshold,0]],this.renderer.options=t,this._highlightedPoint=null,this._dataColors=[],this._barPoints=[],this.fillAxis="y",this._primaryAxis="_yaxis",this._xnudge=0,o={lineJoin:"miter",lineCap:"butt",fill:this.fill,fillRect:this.fill,isarc:!1,strokeStyle:this.color,fillStyle:this.color,closePath:this.fill,lineWidth:this.lineWidth},this.renderer.shapeRenderer.init(o),e=t.shadowOffset,e==null&&(e=this.lineWidth>2.5?1.25*(1+(Math.atan(this.lineWidth/2.5)/.785398163-1)*.6):1.25*Math.atan(this.lineWidth/2.5)/.785398163),s={lineJoin:"miter",lineCap:"butt",fill:this.fill,fillRect:this.fill,isarc:!1,angle:this.shadowAngle,offset:e,alpha:this.shadowAlpha,depth:this.shadowDepth,closePath:this.fill,lineWidth:this.lineWidth},this.renderer.shadowRenderer.init(s),i.postDrawHooks.addOnce(r),i.eventListenerHooks.addOnce("jqplotMouseMove",f),this.side==="left")for(u=0,h=this.data.length;u<h;u++)this.data[u][1]=-Math.abs(this.data[u][1])};n.jqplot.PyramidRenderer.prototype.setGridData=function(){var i=this._xaxis.series_u2p,f=this._yaxis.series_u2p,t=this._plotData,e=this._prevPlotData,r,u,n;for(this.gridData=[],this._prevGridData=[],r=t.length,u=!1,n=0;n<r;n++)t[n][1]<0&&(this.side="left");for(this._yaxis.name==="yMidAxis"&&this.side==="right"&&(this._xnudge=this._xaxis.max/2e3,u=!0),n=0;n<r;n++)t[n][0]!=null&&t[n][1]!=null?this.gridData.push([i(t[n][1]),f(t[n][0])]):t[n][0]==null?this.gridData.push([i(t[n][1]),null]):t[n][1]==null&&this.gridData.push(null,[f(t[n][0])]),t[n][1]===0&&u&&(this.gridData[n][0]=i(this._xnudge))};n.jqplot.PyramidRenderer.prototype.makeGridData=function(n){for(var r=this._xaxis.series_u2p,u=this._yaxis.series_u2p,i=[],f=n.length,e=!1,t=0;t<f;t++)n[t][1]<0&&(this.side="left");for(this._yaxis.name==="yMidAxis"&&this.side==="right"&&(this._xnudge=this._xaxis.max/2e3,e=!0),t=0;t<f;t++)n[t][0]!=null&&n[t][1]!=null?i.push([r(n[t][1]),u(n[t][0])]):n[t][0]==null?i.push([r(n[t][1]),null]):n[t][1]==null&&i.push([null,u(n[t][0])]),n[t][1]===0&&e&&(i[t][0]=r(this._xnudge));return i};n.jqplot.PyramidRenderer.prototype.setBarWidth=function(){var t=0,n=this[this._primaryAxis];t=n.max-n.min;var r=n.numberTicks,u=(r-1)/2,i=this.barPadding===0?1:0;this.barWidth=n.name=="xaxis"||n.name=="x2axis"?(n._offsets.max-n._offsets.min)/t-this.barPadding+i:this.fill?(n._offsets.min-n._offsets.max)/t-this.barPadding+i:(n._offsets.min-n._offsets.max)/t};n.jqplot.PyramidRenderer.prototype.draw=function(t,i,r){var e=n.extend({},r),p=e.shadow!=undefined?e.shadow:this.shadow,g=e.showLine!=undefined?e.showLine:this.showLine,rt=e.fill!=undefined?e.fill:this.fill,ut=this._xaxis.series_u2p,ft=this._yaxis.series_u2p,f,h,c,y,a,u;if(this._dataColors=[],this._barPoints=[],this.renderer.options.barWidth==null&&this.renderer.setBarWidth.call(this),f=[],g){var w=new n.jqplot.ColorGenerator(this.negativeSeriesColors),b=new n.jqplot.ColorGenerator(this.seriesColors),nt=w.get(this.index);this.useNegativeColors||(nt=e.fillStyle);var tt=e.fillStyle,v,l=this._xaxis.series_u2p(this._xnudge),k=this._yaxis.series_u2p(this._yaxis.min),d=this._yaxis.series_u2p(this._yaxis.max),it=this.barWidth,o=it/2,f=[],s=this.offsetBars?o:0;for(u=0,y=i.length;u<y;u++)this.data[u][0]!=null&&(v=i[u][1],this._plotData[u][1]<0?this.varyBarColor&&!this._stack&&(e.fillStyle=this.useNegativeColors?w.next():b.next()):e.fillStyle=this.varyBarColor&&!this._stack?b.next():tt,this.fill?(this._plotData[u][1]>=0?(h=i[u][0]-l,c=this.barWidth,f=[l,v-o-s,h,c]):(h=l-i[u][0],c=this.barWidth,f=[i[u][0],v-o-s,h,c]),this._barPoints.push([[f[0],f[1]+c],[f[0],f[1]],[f[0]+h,f[1]],[f[0]+h,f[1]+c]]),p&&this.renderer.shadowRenderer.draw(t,f),a=e.fillStyle||this.color,this._dataColors.push(a),this.renderer.shapeRenderer.draw(t,f,e)):u===0?f=[[l,k],[i[u][0],k],[i[u][0],i[u][1]-o-s]]:u<y-1?f=f.concat([[i[u-1][0],i[u-1][1]-o-s],[i[u][0],i[u][1]+o-s],[i[u][0],i[u][1]-o-s]]):(f=f.concat([[i[u-1][0],i[u-1][1]-o-s],[i[u][0],i[u][1]+o-s],[i[u][0],d],[l,d]]),p&&this.renderer.shadowRenderer.draw(t,f),a=e.fillStyle||this.color,this._dataColors.push(a),this.renderer.shapeRenderer.draw(t,f,e)))}if(this.highlightColors.length==0)this.highlightColors=n.jqplot.computeHighlightColors(this._dataColors);else if(typeof this.highlightColors=="string")for(this.highlightColors=[],u=0;u<this._dataColors.length;u++)this.highlightColors.push(this.highlightColors)};n.jqplot.preInitHooks.push(i)})(jQuery);