(function(n){function u(){var i,r,t;if(this.rendererOptions.barDirection=="horizontal"&&(this._stackAxis="x",this._primaryAxis="_yaxis"),this.rendererOptions.waterfall==!0){for(this._data=n.extend(!0,[],this.data),i=0,r=!this.rendererOptions.barDirection||this.rendererOptions.barDirection==="vertical"||this.transposedData===!1?1:0,t=0;t<this.data.length;t++)i+=this.data[t][r],t>0&&(this.data[t][r]+=this.data[t-1][r]);this.data[this.data.length]=r==1?[this.data.length+1,i]:[i,this.data.length+1];this._data[this._data.length]=r==1?[this._data.length+1,i]:[i,this._data.length+1]}if(this.rendererOptions.groups>1){this.breakOnNull=!0;var f=this.data.length,e=parseInt(f/this.rendererOptions.groups,10),u=0;for(t=e;t<f;t+=e)this.data.splice(t+u,0,[null,null]),this._plotData.splice(t+u,0,[null,null]),this._stackData.splice(t+u,0,[null,null]),u++;for(t=0;t<this.data.length;t++)this._primaryAxis=="_xaxis"?(this.data[t][0]=t+1,this._plotData[t][0]=t+1,this._stackData[t][0]=t+1):(this.data[t][1]=t+1,this._plotData[t][1]=t+1,this._stackData[t][1]=t+1)}}function t(n,i,r,u,f){var e=n,o=n-1,s,c,h=f==="x"?0:1;return e>0?(c=u.series[o]._plotData[i][h],s=r*c<0?t(o,i,r,u,f):u.series[o].gridData[i][h]):s=h===0?u.series[e]._xaxis.series_u2p(0):u.series[e]._yaxis.series_u2p(0),s}function f(){for(var t=0;t<this.series.length;t++)this.series[t].renderer.constructor==n.jqplot.BarRenderer&&this.series[t].highlightMouseOver&&(this.series[t].highlightMouseDown=!1)}function e(){this.plugins.barRenderer&&this.plugins.barRenderer.highlightCanvas&&(this.plugins.barRenderer.highlightCanvas.resetCanvas(),this.plugins.barRenderer.highlightCanvas=null);this.plugins.barRenderer={highlightedSeriesIndex:null};this.plugins.barRenderer.highlightCanvas=new n.jqplot.GenericCanvas;this.eventCanvas._elem.before(this.plugins.barRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-barRenderer-highlight-canvas",this._plotDimensions,this));this.plugins.barRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(n){i(n.data.plot)})}function r(n,t,i,r){var f=n.series[t],u=n.plugins.barRenderer.highlightCanvas,e;u._ctx.clearRect(0,0,u._ctx.canvas.width,u._ctx.canvas.height);f._highlightedPoint=i;n.plugins.barRenderer.highlightedSeriesIndex=t;e={fillStyle:f.highlightColors[i]};f.renderer.shapeRenderer.draw(u._ctx,r,e);u=null}function i(n){var t=n.plugins.barRenderer.highlightCanvas,i;for(t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height),i=0;i<n.series.length;i++)n.series[i]._highlightedPoint=null;n.plugins.barRenderer.highlightedSeriesIndex=null;n.target.trigger("jqplotDataUnhighlight");t=null}function o(n,t,u,f,e){var o,h,s;f?(o=[f.seriesIndex,f.pointIndex,f.data],h=jQuery.Event("jqplotDataMouseOver"),h.pageX=n.pageX,h.pageY=n.pageY,e.target.trigger(h,o),!e.series[o[0]].show||!e.series[o[0]].highlightMouseOver||o[0]==e.plugins.barRenderer.highlightedSeriesIndex&&o[1]==e.series[o[0]]._highlightedPoint||(s=jQuery.Event("jqplotDataHighlight"),s.which=n.which,s.pageX=n.pageX,s.pageY=n.pageY,e.target.trigger(s,o),r(e,f.seriesIndex,f.pointIndex,f.points))):f==null&&i(e)}function s(n,t,u,f,e){var o,s;f?(o=[f.seriesIndex,f.pointIndex,f.data],!e.series[o[0]].highlightMouseDown||o[0]==e.plugins.barRenderer.highlightedSeriesIndex&&o[1]==e.series[o[0]]._highlightedPoint||(s=jQuery.Event("jqplotDataHighlight"),s.which=n.which,s.pageX=n.pageX,s.pageY=n.pageY,e.target.trigger(s,o),r(e,f.seriesIndex,f.pointIndex,f.points))):f==null&&i(e)}function h(n,t,r,u,f){var e=f.plugins.barRenderer.highlightedSeriesIndex;e!=null&&f.series[e].highlightMouseDown&&i(f)}function c(n,t,i,r,u){if(r){var e=[r.seriesIndex,r.pointIndex,r.data],f=jQuery.Event("jqplotDataClick");f.which=n.which;f.pageX=n.pageX;f.pageY=n.pageY;u.target.trigger(f,e)}}function l(n,t,r,u,f){var s,o,e;u&&(s=[u.seriesIndex,u.pointIndex,u.data],o=f.plugins.barRenderer.highlightedSeriesIndex,o!=null&&f.series[o].highlightMouseDown&&i(f),e=jQuery.Event("jqplotDataRightClick"),e.which=n.which,e.pageX=n.pageX,e.pageY=n.pageY,f.target.trigger(e,s))}n.jqplot.BarRenderer=function(){n.jqplot.LineRenderer.call(this)};n.jqplot.BarRenderer.prototype=new n.jqplot.LineRenderer;n.jqplot.BarRenderer.prototype.constructor=n.jqplot.BarRenderer;n.jqplot.BarRenderer.prototype.init=function(t,i){var r,u;this.barPadding=8;this.barMargin=10;this.barDirection="vertical";this.barWidth=null;this.shadowOffset=2;this.shadowDepth=5;this.shadowAlpha=.08;this.waterfall=!1;this.groups=1;this.varyBarColor=!1;this.highlightMouseOver=!0;this.highlightMouseDown=!1;this.highlightColors=[];this.transposedData=!0;this.renderer.animation={show:!1,direction:"down",speed:3e3,_supported:!0};this._type="bar";t.highlightMouseDown&&t.highlightMouseOver==null&&(t.highlightMouseOver=!1);n.extend(!0,this,t);n.extend(!0,this.renderer,t);this.fill=!0;this.barDirection==="horizontal"&&this.rendererOptions.animation&&this.rendererOptions.animation.direction==null&&(this.renderer.animation.direction="left");this.waterfall&&(this.fillToZero=!1,this.disableStack=!0);this.barDirection=="vertical"?(this._primaryAxis="_xaxis",this._stackAxis="y",this.fillAxis="y"):(this._primaryAxis="_yaxis",this._stackAxis="x",this.fillAxis="x");this._highlightedPoint=null;this._plotSeriesInfo=null;this._dataColors=[];this._barPoints=[];r={lineJoin:"miter",lineCap:"round",fill:!0,isarc:!1,strokeStyle:this.color,fillStyle:this.color,closePath:this.fill};this.renderer.shapeRenderer.init(r);u={lineJoin:"miter",lineCap:"round",fill:!0,isarc:!1,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,closePath:this.fill};this.renderer.shadowRenderer.init(u);i.postInitHooks.addOnce(f);i.postDrawHooks.addOnce(e);i.eventListenerHooks.addOnce("jqplotMouseMove",o);i.eventListenerHooks.addOnce("jqplotMouseDown",s);i.eventListenerHooks.addOnce("jqplotMouseUp",h);i.eventListenerHooks.addOnce("jqplotClick",c);i.eventListenerHooks.addOnce("jqplotRightClick",l)};n.jqplot.preSeriesInitHooks.push(u);n.jqplot.BarRenderer.prototype.calcSeriesNumbers=function(){for(var r=0,u=0,f=this[this._primaryAxis],t,e,i=0;i<f._series.length;i++)t=f._series[i],t===this&&(e=i),t.renderer.constructor==n.jqplot.BarRenderer&&(r+=t.data.length,u+=1);return[r,u,e]};n.jqplot.BarRenderer.prototype.setBarWidth=function(){var i=0,t=0,n=this[this._primaryAxis],u=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this),f,r;return i=u[0],t=u[1],f=n.numberTicks,r=(f-1)/2,this.barWidth=n.name=="xaxis"||n.name=="x2axis"?this._stack?(n._offsets.max-n._offsets.min)/i*t-this.barMargin:((n._offsets.max-n._offsets.min)/r-this.barPadding*(t-1)-this.barMargin*2)/t:this._stack?(n._offsets.min-n._offsets.max)/i*t-this.barMargin:((n._offsets.min-n._offsets.max)/r-this.barPadding*(t-1)-this.barMargin*2)/t,[i,t]};n.jqplot.BarRenderer.prototype.draw=function(i,r,u,f){var h=n.extend({},u),d=h.shadow!=undefined?h.shadow:this.shadow,g=h.showLine!=undefined?h.showLine:this.showLine,it=h.fill!=undefined?h.fill:this.fill,rt=this.xaxis,ut=this.yaxis,ft=this._xaxis.series_u2p,et=this._yaxis.series_u2p,k,s,c,v,l,p,a,e;this._dataColors=[];this._barPoints=[];this.barWidth==null&&this.renderer.setBarWidth.call(this);var a=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this),ot=a[0],nt=a[1],tt=a[2],o=[];if(this._barNudge=this._stack?0:(-Math.abs(nt/2-.5)+tt)*(this.barWidth+this.barPadding),g){var w=new n.jqplot.ColorGenerator(this.negativeSeriesColors),y=new n.jqplot.ColorGenerator(this.seriesColors),b=w.get(this.index);if(this.useNegativeColors||(b=h.fillStyle),k=h.fillStyle,this.barDirection=="vertical")for(e=0;e<r.length;e++)(this._stack||this.data[e][1]!=null)&&(o=[],s=r[e][0]+this._barNudge,v=this._stack&&this._prevGridData.length?t(this.index,e,this._plotData[e][1],f,"y"):this.fillToZero?this._yaxis.series_u2p(0):this.waterfall&&e>0&&e<this.gridData.length-1?this.gridData[e-1][1]:this.waterfall&&e==0&&e<this.gridData.length-1?this._yaxis.min<=0&&this._yaxis.max>=0?this._yaxis.series_u2p(0):this._yaxis.min>0?i.canvas.height:0:this.waterfall&&e==this.gridData.length-1?this._yaxis.min<=0&&this._yaxis.max>=0?this._yaxis.series_u2p(0):this._yaxis.min>0?i.canvas.height:0:i.canvas.height,h.fillStyle=this.fillToZero&&this._plotData[e][1]<0||this.waterfall&&this._data[e][1]<0?this.varyBarColor&&!this._stack?this.useNegativeColors?w.next():y.next():b:this.varyBarColor&&!this._stack?y.next():k,!this.fillToZero||this._plotData[e][1]>=0?(o.push([s-this.barWidth/2,v]),o.push([s-this.barWidth/2,r[e][1]]),o.push([s+this.barWidth/2,r[e][1]]),o.push([s+this.barWidth/2,v])):(o.push([s-this.barWidth/2,r[e][1]]),o.push([s-this.barWidth/2,v]),o.push([s+this.barWidth/2,v]),o.push([s+this.barWidth/2,r[e][1]])),this._barPoints.push(o),d&&!this._stack&&(l=n.extend(!0,{},h),delete l.fillStyle,this.renderer.shadowRenderer.draw(i,o,l)),p=h.fillStyle||this.color,this._dataColors.push(p),this.renderer.shapeRenderer.draw(i,o,h));else if(this.barDirection=="horizontal")for(e=0;e<r.length;e++)(this._stack||this.data[e][0]!=null)&&(o=[],s=r[e][1]-this._barNudge,c,c=this._stack&&this._prevGridData.length?t(this.index,e,this._plotData[e][0],f,"x"):this.fillToZero?this._xaxis.series_u2p(0):this.waterfall&&e>0&&e<this.gridData.length-1?this.gridData[e-1][0]:this.waterfall&&e==0&&e<this.gridData.length-1?this._xaxis.min<=0&&this._xaxis.max>=0?this._xaxis.series_u2p(0):this._xaxis.min>0?0:0:this.waterfall&&e==this.gridData.length-1?this._xaxis.min<=0&&this._xaxis.max>=0?this._xaxis.series_u2p(0):this._xaxis.min>0?0:i.canvas.width:0,h.fillStyle=this.fillToZero&&this._plotData[e][0]<0||this.waterfall&&this._data[e][0]<0?this.varyBarColor&&!this._stack?this.useNegativeColors?w.next():y.next():b:this.varyBarColor&&!this._stack?y.next():k,!this.fillToZero||this._plotData[e][0]>=0?(o.push([c,s+this.barWidth/2]),o.push([c,s-this.barWidth/2]),o.push([r[e][0],s-this.barWidth/2]),o.push([r[e][0],s+this.barWidth/2])):(o.push([r[e][0],s+this.barWidth/2]),o.push([r[e][0],s-this.barWidth/2]),o.push([c,s-this.barWidth/2]),o.push([c,s+this.barWidth/2])),this._barPoints.push(o),d&&!this._stack&&(l=n.extend(!0,{},h),delete l.fillStyle,this.renderer.shadowRenderer.draw(i,o,l)),p=h.fillStyle||this.color,this._dataColors.push(p),this.renderer.shapeRenderer.draw(i,o,h))}if(this.highlightColors.length==0)this.highlightColors=n.jqplot.computeHighlightColors(this._dataColors);else if(typeof this.highlightColors=="string")for(a=this.highlightColors,this.highlightColors=[],e=0;e<this._dataColors.length;e++)this.highlightColors.push(a)};n.jqplot.BarRenderer.prototype.drawShadow=function(n,i,r,u){var s=r!=undefined?r:{},w=s.shadow!=undefined?s.shadow:this.shadow,y=s.showLine!=undefined?s.showLine:this.showLine,b=s.fill!=undefined?s.fill:this.fill,k=this.xaxis,d=this.yaxis,g=this._xaxis.series_u2p,nt=this._yaxis.series_u2p,e,p,a,v,h,c,f,o,l;if(this._stack&&this.shadow&&(this.barWidth==null&&this.renderer.setBarWidth.call(this),h=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this),p=h[0],a=h[1],v=h[2],this._barNudge=this._stack?0:(-Math.abs(a/2-.5)+v)*(this.barWidth+this.barPadding),y))if(this.barDirection=="vertical")for(f=0;f<i.length;f++)this.data[f][1]!=null&&(e=[],o=i[f][0]+this._barNudge,c=this._stack&&this._prevGridData.length?t(this.index,f,this._plotData[f][1],u,"y"):this.fillToZero?this._yaxis.series_u2p(0):n.canvas.height,e.push([o-this.barWidth/2,c]),e.push([o-this.barWidth/2,i[f][1]]),e.push([o+this.barWidth/2,i[f][1]]),e.push([o+this.barWidth/2,c]),this.renderer.shadowRenderer.draw(n,e,s));else if(this.barDirection=="horizontal")for(f=0;f<i.length;f++)this.data[f][0]!=null&&(e=[],o=i[f][1]-this._barNudge,l=this._stack&&this._prevGridData.length?t(this.index,f,this._plotData[f][0],u,"x"):this.fillToZero?this._xaxis.series_u2p(0):0,e.push([l,o+this.barWidth/2]),e.push([i[f][0],o+this.barWidth/2]),e.push([i[f][0],o-this.barWidth/2]),e.push([l,o-this.barWidth/2]),this.renderer.shadowRenderer.draw(n,e,s))}})(jQuery);