(function(n){n.jqplot.EnhancedLegendRenderer=function(){n.jqplot.TableLegendRenderer.call(this)};n.jqplot.EnhancedLegendRenderer.prototype=new n.jqplot.TableLegendRenderer;n.jqplot.EnhancedLegendRenderer.prototype.constructor=n.jqplot.EnhancedLegendRenderer;n.jqplot.EnhancedLegendRenderer.prototype.init=function(t){this.numberRows=null;this.numberColumns=null;this.seriesToggle="normal";this.seriesToggleReplot=!1;this.disableIEFading=!0;n.extend(!0,this,t);this.seriesToggle&&n.jqplot.postDrawHooks.push(i)};n.jqplot.EnhancedLegendRenderer.prototype.draw=function(i,r){var it=this,u,c,f,w,v,a,y,o,d,h,s,e,b,g,k,p,l,nt,tt;if(this.show){for(u=this._series,f="position:absolute;",f+=this.background?"background:"+this.background+";":"",f+=this.border?"border:"+this.border+";":"",f+=this.fontSize?"font-size:"+this.fontSize+";":"",f+=this.fontFamily?"font-family:"+this.fontFamily+";":"",f+=this.textColor?"color:"+this.textColor+";":"",f+=this.marginTop!=null?"margin-top:"+this.marginTop+";":"",f+=this.marginBottom!=null?"margin-bottom:"+this.marginBottom+";":"",f+=this.marginLeft!=null?"margin-left:"+this.marginLeft+";":"",f+=this.marginRight!=null?"margin-right:"+this.marginRight+";":"",this._elem=n('<table class="jqplot-table-legend" style="'+f+'"><\/table>'),this.seriesToggle&&this._elem.css("z-index","3"),w=!1,v=!1,this.numberRows?(a=this.numberRows,y=this.numberColumns?this.numberColumns:Math.ceil(u.length/a)):this.numberColumns?(y=this.numberColumns,a=Math.ceil(u.length/this.numberColumns)):(a=u.length,y=1),l=0,o=u.length-1;o>=0;o--)(y==1&&u[o]._stack||u[o].renderer.constructor==n.jqplot.BezierCurveRenderer)&&(v=!0);for(o=0;o<a;o++){for(h=n(document.createElement("tr")),h.addClass("jqplot-table-legend"),v?h.prependTo(this._elem):h.appendTo(this._elem),d=0;d<y;d++)l<u.length&&(u[l].show||u[l].showLabel)&&(c=u[l],b=this.labels[l]||c.label.toString(),b&&(nt=c.color,w=v?o==a-1?!1:!0:o>0?!0:!1,g=w?this.rowSpacing:"0",s=n(document.createElement("td")),s.addClass("jqplot-table-legend jqplot-table-legend-swatch"),s.css({textAlign:"center",paddingTop:g}),k=n(document.createElement("div")),k.addClass("jqplot-table-legend-swatch-outline"),p=n(document.createElement("div")),p.addClass("jqplot-table-legend-swatch"),p.css({backgroundColor:nt,borderColor:nt}),s.append(k.append(p)),e=n(document.createElement("td")),e.addClass("jqplot-table-legend jqplot-table-legend-label"),e.css("paddingTop",g),this.escapeHtml?e.text(b):e.html(b),v?(this.showLabels&&e.prependTo(h),this.showSwatches&&s.prependTo(h)):(this.showSwatches&&s.appendTo(h),this.showLabels&&e.appendTo(h)),this.seriesToggle&&((typeof this.seriesToggle=="string"||typeof this.seriesToggle=="number")&&(n.jqplot.use_excanvas&&this.disableIEFading||(tt=this.seriesToggle)),this.showSwatches&&(s.bind("click",{series:c,speed:tt,plot:r,replot:this.seriesToggleReplot},t),s.addClass("jqplot-seriesToggle")),this.showLabels&&(e.bind("click",{series:c,speed:tt,plot:r,replot:this.seriesToggleReplot},t),e.addClass("jqplot-seriesToggle")),!c.show&&c.showLabel&&(s.addClass("jqplot-series-hidden"),e.addClass("jqplot-series-hidden"))),w=!0)),l++;s=e=k=p=null}}return this._elem};var t=function(t){var u=t.data,f=u.series,o=u.replot,i=u.plot,e=u.speed,r=f.index,s=!1,h;(f.canvas._elem.is(":hidden")||!f.show)&&(s=!0);h=function(){var u,t;o?(u={},n.isPlainObject(o)&&n.extend(!0,u,o),i.replot(u),s&&e&&(t=i.series[r],t.shadowCanvas._elem&&t.shadowCanvas._elem.hide().fadeIn(e),t.canvas._elem.hide().fadeIn(e),t.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+t.index).hide().fadeIn(e))):(t=i.series[r],t.canvas._elem.is(":hidden")||!t.show?((typeof i.options.legend.showSwatches=="undefined"||i.options.legend.showSwatches===!0)&&i.legend._elem.find("td").eq(r*2).addClass("jqplot-series-hidden"),(typeof i.options.legend.showLabels=="undefined"||i.options.legend.showLabels===!0)&&i.legend._elem.find("td").eq(r*2+1).addClass("jqplot-series-hidden")):((typeof i.options.legend.showSwatches=="undefined"||i.options.legend.showSwatches===!0)&&i.legend._elem.find("td").eq(r*2).removeClass("jqplot-series-hidden"),(typeof i.options.legend.showLabels=="undefined"||i.options.legend.showLabels===!0)&&i.legend._elem.find("td").eq(r*2+1).removeClass("jqplot-series-hidden")))};f.toggleDisplay(t,h)},i=function(){if(this.legend.renderer.constructor==n.jqplot.EnhancedLegendRenderer&&this.legend.seriesToggle){var t=this.legend._elem.detach();this.eventCanvas._elem.after(t)}}})(jQuery);