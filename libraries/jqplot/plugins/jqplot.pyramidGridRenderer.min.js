(function(n){n.jqplot.PyramidGridRenderer=function(){n.jqplot.CanvasGridRenderer.call(this)};n.jqplot.PyramidGridRenderer.prototype=new n.jqplot.CanvasGridRenderer;n.jqplot.PyramidGridRenderer.prototype.constructor=n.jqplot.PyramidGridRenderer;n.jqplot.CanvasGridRenderer.prototype.init=function(t){this._ctx;this.plotBands={show:!1,color:"rgb(230, 219, 179)",axis:"y",start:null,interval:10};n.extend(!0,this,t);var i={lineJoin:"miter",lineCap:"round",fill:!1,isarc:!1,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,lineWidth:this.shadowWidth,closePath:!1,strokeStyle:this.shadowColor};this.renderer.shadowRenderer.init(i)};n.jqplot.PyramidGridRenderer.prototype.draw=function(){function f(t,i,r,u,f){e.save();f=f||{};(f.lineWidth==null||f.lineWidth!=0)&&(n.extend(!0,e,f),e.beginPath(),e.moveTo(t,i),e.lineTo(r,u),e.stroke());e.restore()}var v,i,tt,it,rt,ut,b,o,s,h,p,y,l,k,t,r,w;this._ctx=this._elem.get(0).getContext("2d");var e=this._ctx,u=this._axes,nt=u.xaxis.u2p,st=u.yMidAxis.u2p,ft=u.xaxis.max/1e3,c=nt(0),a=nt(ft),et=["xaxis","yaxis","x2axis","y2axis","yMidAxis"];if(e.save(),e.clearRect(0,0,this._plotDimensions.width,this._plotDimensions.height),e.fillStyle=this.backgroundColor||this.background,e.fillRect(this._left,this._top,this._width,this._height),this.plotBands.show){if(e.save(),v=this.plotBands,e.fillStyle=v.color,v.axis.charAt(0)==="x"?u.xaxis.show&&(i=u.xaxis):v.axis.charAt(0)==="y"&&(u.yaxis.show?i=u.yaxis:u.y2axis.show?i=u.y2axis:u.yMidAxis.show&&(i=u.yMidAxis)),i!==undefined)for(b=v.start,b===null&&(b=i.min),y=b;y<i.max;y+=2*v.interval)i.name.charAt(0)==="y"&&(tt=this._left,it=y+v.interval<i.max?i.series_u2p(y+v.interval)+this._top:i.series_u2p(i.max)+this._top,rt=this._right-this._left,ut=i.series_u2p(b)-i.series_u2p(b+v.interval),e.fillRect(tt,it,rt,ut));e.restore()}for(e.save(),e.lineJoin="miter",e.lineCap="butt",e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor,y=5;y>0;y--){var d=et[y-1],i=u[d],g=i._ticks,ot=g.length;if(i.show){if(i.drawBaseline){l={};i.baselineWidth!==null&&(l.lineWidth=i.baselineWidth);i.baselineColor!==null&&(l.strokeStyle=i.baselineColor);switch(d){case"xaxis":u.yMidAxis.show?(f(this._left,this._bottom,c,this._bottom,l),f(a,this._bottom,this._right,this._bottom,l)):f(this._left,this._bottom,this._right,this._bottom,l);break;case"yaxis":f(this._left,this._bottom,this._left,this._top,l);break;case"yMidAxis":f(c,this._bottom,c,this._top,l);f(a,this._bottom,a,this._top,l);break;case"x2axis":u.yMidAxis.show?(f(this._left,this._top,c,this._top,l),f(a,this._top,this._right,this._top,l)):f(this._left,this._bottom,this._right,this._bottom,l);break;case"y2axis":f(this._right,this._bottom,this._right,this._top,l)}}for(k=ot;k>0;k--)if(t=g[k-1],t.show){r=Math.round(i.u2p(t.value))+.5;switch(d){case"xaxis":if(t.showGridline&&this.drawGridlines&&(!t.isMinorTick||i.showMinorTicks)&&f(r,this._top,r,this._bottom),t.showMark&&t.mark&&(!t.isMinorTick||i.showMinorTicks)){h=t.markSize;p=t.mark;r=Math.round(i.u2p(t.value))+.5;switch(p){case"outside":o=this._bottom;s=this._bottom+h;break;case"inside":o=this._bottom-h;s=this._bottom;break;case"cross":o=this._bottom-h;s=this._bottom+h;break;default:o=this._bottom;s=this._bottom+h}this.shadow&&this.renderer.shadowRenderer.draw(e,[[r,o],[r,s]],{lineCap:"butt",lineWidth:this.gridLineWidth,offset:this.gridLineWidth*.75,depth:2,fill:!1,closePath:!1});f(r,o,r,s)}break;case"yaxis":if(t.showGridline&&this.drawGridlines&&(!t.isMinorTick||i.showMinorTicks)&&f(this._right,r,this._left,r),t.showMark&&t.mark&&(!t.isMinorTick||i.showMinorTicks)){h=t.markSize;p=t.mark;r=Math.round(i.u2p(t.value))+.5;switch(p){case"outside":o=this._left-h;s=this._left;break;case"inside":o=this._left;s=this._left+h;break;case"cross":o=this._left-h;s=this._left+h;break;default:o=this._left-h;s=this._left}this.shadow&&this.renderer.shadowRenderer.draw(e,[[o,r],[s,r]],{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*.75,fill:!1,closePath:!1});f(o,r,s,r,{strokeStyle:i.borderColor})}break;case"yMidAxis":t.showGridline&&this.drawGridlines&&(!t.isMinorTick||i.showMinorTicks)&&(f(this._left,r,c,r),f(a,r,this._right,r));t.showMark&&t.mark&&(!t.isMinorTick||i.showMinorTicks)&&(h=t.markSize,p=t.mark,r=Math.round(i.u2p(t.value))+.5,o=c,s=c+h,this.shadow&&this.renderer.shadowRenderer.draw(e,[[o,r],[s,r]],{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*.75,fill:!1,closePath:!1}),f(o,r,s,r,{strokeStyle:i.borderColor}),o=a-h,s=a,this.shadow&&this.renderer.shadowRenderer.draw(e,[[o,r],[s,r]],{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*.75,fill:!1,closePath:!1}),f(o,r,s,r,{strokeStyle:i.borderColor}));break;case"x2axis":if(t.showGridline&&this.drawGridlines&&(!t.isMinorTick||i.showMinorTicks)&&f(r,this._bottom,r,this._top),t.showMark&&t.mark&&(!t.isMinorTick||i.showMinorTicks)){h=t.markSize;p=t.mark;r=Math.round(i.u2p(t.value))+.5;switch(p){case"outside":o=this._top-h;s=this._top;break;case"inside":o=this._top;s=this._top+h;break;case"cross":o=this._top-h;s=this._top+h;break;default:o=this._top-h;s=this._top}this.shadow&&this.renderer.shadowRenderer.draw(e,[[r,o],[r,s]],{lineCap:"butt",lineWidth:this.gridLineWidth,offset:this.gridLineWidth*.75,depth:2,fill:!1,closePath:!1});f(r,o,r,s)}break;case"y2axis":if(t.showGridline&&this.drawGridlines&&(!t.isMinorTick||i.showMinorTicks)&&f(this._left,r,this._right,r),t.showMark&&t.mark&&(!t.isMinorTick||i.showMinorTicks)){h=t.markSize;p=t.mark;r=Math.round(i.u2p(t.value))+.5;switch(p){case"outside":o=this._right;s=this._right+h;break;case"inside":o=this._right-h;s=this._right;break;case"cross":o=this._right-h;s=this._right+h;break;default:o=this._right;s=this._right+h}this.shadow&&this.renderer.shadowRenderer.draw(e,[[o,r],[s,r]],{lineCap:"butt",lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*.75,fill:!1,closePath:!1});f(o,r,s,r,{strokeStyle:i.borderColor})}}}t=null}i=null;g=null}e.restore();this.shadow&&(u.yMidAxis.show?(w=[[this._left,this._bottom],[c,this._bottom]],this.renderer.shadowRenderer.draw(e,w),w=[[a,this._bottom],[this._right,this._bottom],[this._right,this._top]],this.renderer.shadowRenderer.draw(e,w),w=[[c,this._bottom],[c,this._top]],this.renderer.shadowRenderer.draw(e,w)):(w=[[this._left,this._bottom],[this._right,this._bottom],[this._right,this._top]],this.renderer.shadowRenderer.draw(e,w)));this.borderWidth!=0&&this.drawBorder&&(u.yMidAxis.show?(f(this._left,this._top,c,this._top,{lineCap:"round",strokeStyle:u.x2axis.borderColor,lineWidth:u.x2axis.borderWidth}),f(a,this._top,this._right,this._top,{lineCap:"round",strokeStyle:u.x2axis.borderColor,lineWidth:u.x2axis.borderWidth}),f(this._right,this._top,this._right,this._bottom,{lineCap:"round",strokeStyle:u.y2axis.borderColor,lineWidth:u.y2axis.borderWidth}),f(this._right,this._bottom,a,this._bottom,{lineCap:"round",strokeStyle:u.xaxis.borderColor,lineWidth:u.xaxis.borderWidth}),f(c,this._bottom,this._left,this._bottom,{lineCap:"round",strokeStyle:u.xaxis.borderColor,lineWidth:u.xaxis.borderWidth}),f(this._left,this._bottom,this._left,this._top,{lineCap:"round",strokeStyle:u.yaxis.borderColor,lineWidth:u.yaxis.borderWidth}),f(c,this._bottom,c,this._top,{lineCap:"round",strokeStyle:u.yaxis.borderColor,lineWidth:u.yaxis.borderWidth}),f(a,this._bottom,a,this._top,{lineCap:"round",strokeStyle:u.yaxis.borderColor,lineWidth:u.yaxis.borderWidth})):(f(this._left,this._top,this._right,this._top,{lineCap:"round",strokeStyle:u.x2axis.borderColor,lineWidth:u.x2axis.borderWidth}),f(this._right,this._top,this._right,this._bottom,{lineCap:"round",strokeStyle:u.y2axis.borderColor,lineWidth:u.y2axis.borderWidth}),f(this._right,this._bottom,this._left,this._bottom,{lineCap:"round",strokeStyle:u.xaxis.borderColor,lineWidth:u.xaxis.borderWidth}),f(this._left,this._bottom,this._left,this._top,{lineCap:"round",strokeStyle:u.yaxis.borderColor,lineWidth:u.yaxis.borderWidth})));e.restore();e=null;u=null}})(jQuery);