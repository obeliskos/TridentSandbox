(function(n){function c(n,t,i){for(var f=Number.MAX_VALUE,u,o,s,r=0,c=e.length;r<c;r++)u=Math.abs(i-e[r]),u<f&&(f=u,o=e[r],s=h[r]);return[o,s]}n.jqplot.DateAxisRenderer=function(){n.jqplot.LinearAxisRenderer.call(this);this.date=new n.jsDate};var t=1e3,r=60*t,u=60*r,i=24*u,o=7*i,f=30.4368499*i,s=365.242199*i,h=["%M:%S.%#N","%M:%S.%#N","%M:%S.%#N","%M:%S","%M:%S","%M:%S","%M:%S","%H:%M:%S","%H:%M:%S","%H:%M","%H:%M","%H:%M","%H:%M","%H:%M","%H:%M","%a %H:%M","%a %H:%M","%b %e %H:%M","%b %e %H:%M","%b %e %H:%M","%b %e %H:%M","%v","%v","%v","%v","%v","%v","%v"],e=[.1*t,.2*t,.5*t,t,2*t,5*t,10*t,15*t,30*t,r,2*r,5*r,10*r,15*r,30*r,u,2*u,4*u,6*u,8*u,12*u,i,2*i,3*i,4*i,5*i,o,2*o];n.jqplot.DateAxisRenderer.prototype=new n.jqplot.LinearAxisRenderer;n.jqplot.DateAxisRenderer.prototype.constructor=n.jqplot.DateAxisRenderer;n.jqplot.DateTickFormatter=function(t,i){return t||(t="%Y/%m/%d"),n.jsDate.strftime(i,t)};n.jqplot.DateAxisRenderer.prototype.init=function(t){var u,e,h,s,r,c,l,o,a,f,i,v,p,w,y;for(this.tickOptions.formatter=n.jqplot.DateTickFormatter,this.tickInset=0,this.drawBaseline=!0,this.baselineWidth=null,this.baselineColor=null,this.daTickInterval=null,this._daTickInterval=null,n.extend(!0,this,t),u=this._dataBounds,a=0;a<this._series.length;a++){for(e={intervals:[],frequencies:{},sortedIntervals:[],min:null,max:null,mean:null},h=0,s=this._series[a],r=s.data,c=s._plotData,l=s._stackData,o=0,i=0;i<r.length;i++)this.name=="xaxis"||this.name=="x2axis"?(r[i][0]=new n.jsDate(r[i][0]).getTime(),c[i][0]=new n.jsDate(r[i][0]).getTime(),l[i][0]=new n.jsDate(r[i][0]).getTime(),(r[i][0]!=null&&r[i][0]<u.min||u.min==null)&&(u.min=r[i][0]),(r[i][0]!=null&&r[i][0]>u.max||u.max==null)&&(u.max=r[i][0]),i>0&&(o=Math.abs(r[i][0]-r[i-1][0]),e.intervals.push(o),e.frequencies.hasOwnProperty(o)?e.frequencies[o]+=1:e.frequencies[o]=1),h+=o):(r[i][1]=new n.jsDate(r[i][1]).getTime(),c[i][1]=new n.jsDate(r[i][1]).getTime(),l[i][1]=new n.jsDate(r[i][1]).getTime(),(r[i][1]!=null&&r[i][1]<u.min||u.min==null)&&(u.min=r[i][1]),(r[i][1]!=null&&r[i][1]>u.max||u.max==null)&&(u.max=r[i][1]),i>0&&(o=Math.abs(r[i][1]-r[i-1][1]),e.intervals.push(o),e.frequencies.hasOwnProperty(o)?e.frequencies[o]+=1:e.frequencies[o]=1)),h+=o;if(s.renderer.bands){if(s.renderer.bands.hiData.length)for(f=s.renderer.bands.hiData,i=0,v=f.length;i<v;i++)this.name==="xaxis"||this.name==="x2axis"?(f[i][0]=new n.jsDate(f[i][0]).getTime(),(f[i][0]!=null&&f[i][0]>u.max||u.max==null)&&(u.max=f[i][0])):(f[i][1]=new n.jsDate(f[i][1]).getTime(),(f[i][1]!=null&&f[i][1]>u.max||u.max==null)&&(u.max=f[i][1]));if(s.renderer.bands.lowData.length)for(f=s.renderer.bands.lowData,i=0,v=f.length;i<v;i++)this.name==="xaxis"||this.name==="x2axis"?(f[i][0]=new n.jsDate(f[i][0]).getTime(),(f[i][0]!=null&&f[i][0]<u.min||u.min==null)&&(u.min=f[i][0])):(f[i][1]=new n.jsDate(f[i][1]).getTime(),(f[i][1]!=null&&f[i][1]<u.min||u.min==null)&&(u.min=f[i][1]))}p=0;w=0;for(y in e.frequencies)e.sortedIntervals.push({interval:y,frequency:e.frequencies[y]});e.sortedIntervals.sort(function(n,t){return t.frequency-n.frequency});e.min=n.jqplot.arrayMin(e.intervals);e.max=n.jqplot.arrayMax(e.intervals);e.mean=h/r.length;this._intervalStats.push(e);e=h=s=r=c=l=null}u=null};n.jqplot.DateAxisRenderer.prototype.reset=function(){this.min=this._options.min;this.max=this._options.max;this.tickInterval=this._options.tickInterval;this.numberTicks=this._options.numberTicks;this._autoFormatString="";this._overrideFormatString&&this.tickOptions&&this.tickOptions.formatString&&(this.tickOptions.formatString="");this.daTickInterval=this._daTickInterval};n.jqplot.DateAxisRenderer.prototype.createTicks=function(t){var kt=this._ticks,rt=this.ticks,ct=this.name,k=this._dataBounds,ii=this._intervalStats,nt=this.name.charAt(0)==="x"?this._plotDimensions.width:this._plotDimensions.height,l,lt,at=30,p=1,w=null,d,dt,ut,g,tt,et,ft,b,o,v,vt,ot,st,y,yt,h,ht,ti,pt,wt,bt,u,e,r;if(this.tickInterval!=null&&(Number(this.tickInterval)?w=[Number(this.tickInterval),"seconds"]:typeof this.tickInterval=="string"&&(d=this.tickInterval.split(" "),d.length==1?w=[1,d[0]]:d.length==2&&(w=[d[0],d[1]]))),dt=this.tickInterval,e=new n.jsDate(this.min!=null?this.min:k.min).getTime(),l=new n.jsDate(this.max!=null?this.max:k.max).getTime(),ut=t.plugins.cursor,ut&&ut._zoom&&ut._zoom.zooming&&(this.min=null,this.max=null),g=l-e,this.tickOptions!=null&&this.tickOptions.formatString||(this._overrideFormatString=!0),rt.length){for(u=0;u<rt.length;u++)tt=rt[u],r=new this.tickRenderer(this.tickOptions),tt.constructor==Array?(r.value=new n.jsDate(tt[0]).getTime(),r.label=tt[1],this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),r.setTick(r.value,this.name),this._ticks.push(r)):(r.value=new n.jsDate(tt).getTime(),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),r.setTick(r.value,this.name),this._ticks.push(r));this.numberTicks=rt.length;this.min=this._ticks[0].value;this.max=this._ticks[this.numberTicks-1].value;this.daTickInterval=[(this.max-this.min)/(this.numberTicks-1)/1e3,"seconds"]}else if(this.min==null&&this.max==null&&k.min==k.max){for(et=n.extend(!0,{},this.tickOptions,{name:this.name,value:null}),ft=3e5,this.min=k.min-ft,this.max=k.max+ft,this.numberTicks=3,u=this.min;u<=this.max;u+=ft)et.value=u,r=new this.tickRenderer(et),this._overrideFormatString&&this._autoFormatString!=""&&(r.formatString=this._autoFormatString),r.showLabel=!1,r.showMark=!1,this._ticks.push(r);this.showTicks&&(this._ticks[1].showLabel=!0);this.showTickMarks&&(this._ticks[1].showTickMarks=!0)}else if(this.min==null&&this.max==null)if(b=n.extend(!0,{},this.tickOptions,{name:this.name,value:null}),this.tickInterval||this.numberTicks?this.tickInterval?v=new n.jsDate(0).add(w[0],w[1]).getTime():this.numberTicks&&(o=this.numberTicks,v=(l-e)/(o-1)):(vt=Math.max(nt,at+1),ot=115,this.tickRenderer===n.jqplot.CanvasAxisTickRenderer&&this.tickOptions.angle&&(ot=115-40*Math.abs(Math.sin(this.tickOptions.angle/180*Math.PI))),o=Math.ceil((vt-at)/ot+1),v=(l-e)/(o-1)),v<=19*i){for(st=c(e,l,v),y=st[0],this._autoFormatString=st[1],e=new n.jsDate(e),e=Math.floor((e.getTime()-e.getUtcOffset())/y)*y+e.getUtcOffset(),o=Math.ceil((l-e)/y)+1,this.min=e,this.max=e+(o-1)*y,this.max<l&&(this.max+=y,o+=1),this.tickInterval=y,this.numberTicks=o,u=0;u<o;u++)b.value=this.min+u*y,r=new this.tickRenderer(b),this._overrideFormatString&&this._autoFormatString!=""&&(r.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),this._ticks.push(r);p=this.tickInterval}else if(v<=9*f){this._autoFormatString="%v";h=Math.round(v/f);h<1?h=1:h>6&&(h=6);var a=new n.jsDate(e).setDate(1).setHours(0,0,0,0),gt=new n.jsDate(l),it=new n.jsDate(l).setDate(1).setHours(0,0,0,0);for(gt.getTime()!==it.getTime()&&(it=it.add(1,"month")),yt=it.diff(a,"month"),o=Math.ceil(yt/h)+1,this.min=a.getTime(),this.max=a.clone().add((o-1)*h,"month").getTime(),this.numberTicks=o,u=0;u<o;u++)b.value=u===0?a.getTime():a.add(h,"month").getTime(),r=new this.tickRenderer(b),this._overrideFormatString&&this._autoFormatString!=""&&(r.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),this._ticks.push(r);p=h*f}else{this._autoFormatString="%v";h=Math.round(v/s);h<1&&(h=1);var a=new n.jsDate(e).setMonth(0,1).setHours(0,0,0,0),it=new n.jsDate(l).add(1,"year").setMonth(0,1).setHours(0,0,0,0),ni=it.diff(a,"year");for(o=Math.ceil(ni/h)+1,this.min=a.getTime(),this.max=a.clone().add((o-1)*h,"year").getTime(),this.numberTicks=o,u=0;u<o;u++)b.value=u===0?a.getTime():a.add(h,"year").getTime(),r=new this.tickRenderer(b),this._overrideFormatString&&this._autoFormatString!=""&&(r.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),this._ticks.push(r);p=h*s}else for(nt=ct=="xaxis"||ct=="x2axis"?this._plotDimensions.width:this._plotDimensions.height,this.min!=null&&this.max!=null&&this.numberTicks!=null&&(this.tickInterval=null),this.tickInterval!=null&&w!=null&&(this.daTickInterval=w),e==l&&(ht=432e5,e-=ht,l+=ht),g=l-e,ti=2+parseInt(Math.max(0,nt-100)/100,10),pt=this.min!=null?new n.jsDate(this.min).getTime():e-g/2*(this.padMin-1),wt=this.max!=null?new n.jsDate(this.max).getTime():l+g/2*(this.padMax-1),this.min=pt,this.max=wt,g=this.max-this.min,this.numberTicks==null&&(this.daTickInterval!=null?(bt=new n.jsDate(this.max).diff(this.min,this.daTickInterval[1],!0),this.numberTicks=Math.ceil(bt/this.daTickInterval[0])+1,this.max=new n.jsDate(this.min).add((this.numberTicks-1)*this.daTickInterval[0],this.daTickInterval[1]).getTime()):this.numberTicks=nt>200?parseInt(3+(nt-200)/100,10):2),p=g/(this.numberTicks-1)/1e3,this.daTickInterval==null&&(this.daTickInterval=[p,"seconds"]),u=0;u<this.numberTicks;u++)e=new n.jsDate(this.min),lt=e.add(u*this.daTickInterval[0],this.daTickInterval[1]).getTime(),r=new this.tickRenderer(this.tickOptions),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),r.setTick(lt,this.name),this._ticks.push(r);this.tickInset&&(this.min=this.min-this.tickInset*p,this.max=this.max+this.tickInset*p);this._daTickInterval==null&&(this._daTickInterval=this.daTickInterval);kt=null}})(jQuery);