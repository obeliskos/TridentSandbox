(function(n){n.jqplot.LogAxisRenderer=function(){n.jqplot.LinearAxisRenderer.call(this);this.axisDefaults={base:10,tickDistribution:"power"}};n.jqplot.LogAxisRenderer.prototype=new n.jqplot.LinearAxisRenderer;n.jqplot.LogAxisRenderer.prototype.constructor=n.jqplot.LogAxisRenderer;n.jqplot.LogAxisRenderer.prototype.init=function(t){this.drawBaseline=!0;this.minorTicks="auto";this._scalefact=1;n.extend(!0,this,t);this._autoFormatString="%d";this._overrideFormatString=!1;for(var i in this.renderer.axisDefaults)this[i]==null&&(this[i]=this.renderer.axisDefaults[i]);this.resetDataBounds()};n.jqplot.LogAxisRenderer.prototype.createTicks=function(){var ht=this._ticks,a=this.ticks,ct=this.name,nt=this._dataBounds,v=this.name.charAt(0)==="x"?this._plotDimensions.width:this._plotDimensions.height,s,h,k,y=30,f,d,c,it,e,ft,r,u,o,t,rt,p,et,tt,w,l,b,ut,i;if(this._scalefact=(Math.max(v,y+1)-y)/300,a.length){for(i=0;i<a.length;i++)f=a[i],t=new this.tickRenderer(this.tickOptions),f.constructor==Array?(t.value=f[0],t.label=f[1],this.showTicks?this.showTickMarks||(t.showMark=!1):(t.showLabel=!1,t.showMark=!1),t.setTick(f[0],this.name),this._ticks.push(t)):n.isPlainObject(f)?(n.extend(!0,t,f),t.axis=this.name,this._ticks.push(t)):(t.value=f,this.showTicks?this.showTickMarks||(t.showMark=!1):(t.showLabel=!1,t.showMark=!1),t.setTick(f,this.name),this._ticks.push(t));this.numberTicks=a.length;this.min=this._ticks[0].value;this.max=this._ticks[this.numberTicks-1].value}else if(this.min==null&&this.max==null){if(s=nt.min*(2-this.padMin),h=nt.max*this.padMax,s==h&&(d=.05,s=s*(1-d),h=h*(1+d)),this.min!=null&&this.min<=0)throw new Error("Log axis minimum must be greater than 0");if(this.max!=null&&this.max<=0)throw new Error("Log axis maximum must be greater than 0");function lt(n){var t=Math.pow(10,Math.floor(Math.log(n)/Math.LN10));return Math.ceil(n/t)*t}function at(n){var t=Math.pow(10,Math.floor(Math.log(n)/Math.LN10));return Math.floor(n/t)*t}for(c=Math.pow(this.base,Math.floor(Math.log(s)/Math.log(this.base))),it=Math.pow(this.base,Math.ceil(Math.log(h)/Math.log(this.base))),c===0&&(c=1),e=Math.round(Math.log(c)/Math.LN10),this.tickOptions!=null&&this.tickOptions.formatString||(this._overrideFormatString=!0),this.min=c,this.max=it,ft=this.max-this.min,r=this.minorTicks==="auto"?0:this.minorTicks,this.numberTicks==null?v>140?(u=Math.round(Math.log(this.max/this.min)/Math.log(this.base)+1),u<2&&(u=2),r===0&&(o=v/(u-1),r=o<100?0:o<190?1:o<250?3:o<600?4:9)):(u=2,r===0&&(r=1),r=0):u=this.numberTicks,e>=0&&r!==3?this._autoFormatString="%d":e<=0&&r===3?(o=-(e-1),this._autoFormatString="%."+Math.abs(e-1)+"f"):e<0?(o=-e,this._autoFormatString="%."+Math.abs(e)+"f"):this._autoFormatString="%d",i=0;i<u;i++)if(k=Math.pow(this.base,i-u+1)*this.max,t=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&(t.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(t.showMark=!1):(t.showLabel=!1,t.showMark=!1),t.setTick(k,this.name),this._ticks.push(t),r&&i<u-1)for(p=Math.pow(this.base,i-u+2)*this.max,et=p-k,tt=p/(r+1),w=r-1;w>=0;w--)rt=p-tt*(w+1),t=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&this._autoFormatString!=""&&(t.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(t.showMark=!1):(t.showLabel=!1,t.showMark=!1),t.setTick(rt,this.name),this._ticks.push(t)}else if(this.min!=null&&this.max!=null)if(l=n.extend(!0,{},this.tickOptions,{name:this.name,value:null}),this.numberTicks==null&&this.tickInterval==null){var ot=Math.max(v,y+1),st=Math.ceil((ot-y)/35+1),g=n.jqplot.LinearTickGenerator.bestConstrainedInterval(this.min,this.max,st);for(this._autoFormatString=g[3],b=g[2],ut=g[4],i=0;i<b;i++)l.value=this.min+i*ut,t=new this.tickRenderer(l),this._overrideFormatString&&this._autoFormatString!=""&&(t.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(t.showMark=!1):(t.showLabel=!1,t.showMark=!1),this._ticks.push(t)}else if(this.numberTicks!=null&&this.tickInterval!=null)for(b=this.numberTicks,i=0;i<b;i++)l.value=this.min+i*this.tickInterval,t=new this.tickRenderer(l),this._overrideFormatString&&this._autoFormatString!=""&&(t.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(t.showMark=!1):(t.showLabel=!1,t.showMark=!1),this._ticks.push(t)};n.jqplot.LogAxisRenderer.prototype.pack=function(t,i){var w=parseInt(this.base,10),c=this._ticks,s=function(n){return Math.log(n)/Math.log(w)},v=function(n){return Math.pow(Math.E,Math.log(w)*n)},y=s(this.max),h=s(this.min),b=i.max,l=i.min,k=this._label==null?!1:this._label.show,p,f,o,d,e,r,u,a,g;for(p in t)this._elem.css(p,t[p]);if(this._offsets=i,f=b-l,o=y-h,this.p2u=function(n){return v((n-l)*o/f+h)},this.u2p=function(n){return(s(n)-h)*f/o+l},this.name=="xaxis"||this.name=="x2axis"?(this.series_u2p=function(n){return(s(n)-h)*f/o},this.series_p2u=function(n){return v(n*o/f+h)}):(this.series_u2p=function(n){return(s(n)-y)*f/o},this.series_p2u=function(n){return v(n*o/f+y)}),this.show)if(this.name=="xaxis"||this.name=="x2axis"){for(e=0;e<c.length;e++)if(r=c[e],r.show&&r.showLabel){if(r.constructor==n.jqplot.CanvasAxisTickRenderer&&r.angle)switch(r.labelPosition){case"auto":u=r.angle<0?-r.getWidth()+r._textRenderer.height*Math.sin(-r._textRenderer.angle)/2:-r._textRenderer.height*Math.sin(r._textRenderer.angle)/2;break;case"end":u=-r.getWidth()+r._textRenderer.height*Math.sin(-r._textRenderer.angle)/2;break;case"start":u=-r._textRenderer.height*Math.sin(r._textRenderer.angle)/2;break;case"middle":u=-r.getWidth()/2+r._textRenderer.height*Math.sin(-r._textRenderer.angle)/2;break;default:u=-r.getWidth()/2+r._textRenderer.height*Math.sin(-r._textRenderer.angle)/2}else u=-r.getWidth()/2;a=this.u2p(r.value)+u+"px";r._elem.css("left",a);r.pack()}k&&(d=this._label._elem.outerWidth(!0),this._label._elem.css("left",l+f/2-d/2+"px"),this.name=="xaxis"?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack())}else{for(e=0;e<c.length;e++)if(r=c[e],r.show&&r.showLabel){if(r.constructor==n.jqplot.CanvasAxisTickRenderer&&r.angle)switch(r.labelPosition){case"auto":case"end":u=r.angle<0?-r._textRenderer.height*Math.cos(-r._textRenderer.angle)/2:-r.getHeight()+r._textRenderer.height*Math.cos(r._textRenderer.angle)/2;break;case"start":u=r.angle>0?-r._textRenderer.height*Math.cos(-r._textRenderer.angle)/2:-r.getHeight()+r._textRenderer.height*Math.cos(r._textRenderer.angle)/2;break;case"middle":u=-r.getHeight()/2;break;default:u=-r.getHeight()/2}else u=-r.getHeight()/2;a=this.u2p(r.value)+u+"px";r._elem.css("top",a);r.pack()}k&&(g=this._label._elem.outerHeight(!0),this._label._elem.css("top",b-f/2-g/2+"px"),this.name=="yaxis"?this._label._elem.css("left","0px"):this._label._elem.css("right","0px"),this._label.pack())}}})(jQuery);