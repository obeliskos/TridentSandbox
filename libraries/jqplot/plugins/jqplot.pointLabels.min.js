(function(n){n.jqplot.PointLabels=function(t){this.show=n.jqplot.config.enablePlugins;this.location="n";this.labelsFromSeries=!1;this.seriesLabelIndex=null;this.labels=[];this._labels=[];this.stackedValue=!1;this.ypadding=6;this.xpadding=6;this.escapeHTML=!0;this.edgeTolerance=-5;this.formatter=n.jqplot.DefaultTickFormatter;this.formatString="";this.hideZeros=!1;this._elems=[];n.extend(!0,this,t)};var t={nw:0,n:1,ne:2,e:3,se:4,s:5,sw:6,w:7},i=["se","s","sw","w","nw","n","ne","e"];n.jqplot.PointLabels.init=function(t,i,r,u){var f=n.extend(!0,{},r,u);f.pointLabels=f.pointLabels||{};this.renderer.constructor!==n.jqplot.BarRenderer||this.barDirection!=="horizontal"||f.pointLabels.location||(f.pointLabels.location="e");this.plugins.pointLabels=new n.jqplot.PointLabels(f.pointLabels);this.plugins.pointLabels.setLabels.call(this)};n.jqplot.PointLabels.prototype.setLabels=function(){var t=this.plugins.pointLabels,u,r,i;if(u=t.seriesLabelIndex!=null?t.seriesLabelIndex:this.renderer.constructor===n.jqplot.BarRenderer&&this.barDirection==="horizontal"?this._plotData[0].length<3?0:this._plotData[0].length-1:this._plotData.length===0?0:this._plotData[0].length-1,t._labels=[],t.labels.length===0||t.labelsFromSeries)if(t.stackedValue){if(this._plotData.length&&this._plotData[0].length)for(i=0;i<this._plotData.length;i++)t._labels.push(this._plotData[i][u])}else{if(r=this.data,this.renderer.constructor===n.jqplot.BarRenderer&&this.waterfall&&(r=this._data),r.length&&r[0].length)for(i=0;i<r.length;i++)t._labels.push(r[i][u]);r=null}else t.labels.length&&(t._labels=t.labels)};n.jqplot.PointLabels.prototype.xOffset=function(n,t,i){t=t||this.location;i=i||this.xpadding;var r;switch(t){case"nw":r=-n.outerWidth(!0)-this.xpadding;break;case"n":r=-n.outerWidth(!0)/2;break;case"ne":r=this.xpadding;break;case"e":r=this.xpadding;break;case"se":r=this.xpadding;break;case"s":r=-n.outerWidth(!0)/2;break;case"sw":r=-n.outerWidth(!0)-this.xpadding;break;case"w":r=-n.outerWidth(!0)-this.xpadding;break;default:r=-n.outerWidth(!0)-this.xpadding}return r};n.jqplot.PointLabels.prototype.yOffset=function(n,t,i){t=t||this.location;i=i||this.xpadding;var r;switch(t){case"nw":r=-n.outerHeight(!0)-this.ypadding;break;case"n":r=-n.outerHeight(!0)-this.ypadding;break;case"ne":r=-n.outerHeight(!0)-this.ypadding;break;case"e":r=-n.outerHeight(!0)/2;break;case"se":r=this.ypadding;break;case"s":r=this.ypadding;break;case"sw":r=this.ypadding;break;case"w":r=-n.outerHeight(!0)/2;break;default:r=-n.outerHeight(!0)-this.ypadding}return r};n.jqplot.PointLabels.draw=function(r,u,f){var e=this.plugins.pointLabels,p,o,b,h,a,c,l;for(e.setLabels.call(this),o=0;o<e._elems.length;o++)e._elems[o].emptyForce();if(e._elems.splice(0,e._elems.length),e.show){p="_"+this._stackAxis+"axis";e.formatString||(e.formatString=this[p]._ticks[0].formatString,e.formatter=this[p]._ticks[0].formatter);var v=this._plotData,ft=this._prevPlotData,g=this._xaxis,nt=this._yaxis,s,w;for(o=0,b=e._labels.length;o<b;o++)if(h=e._labels[o],h!=null&&(!e.hideZeros||parseInt(h,10)!=0)){h=e.formatter(e.formatString,h);w=document.createElement("div");e._elems[o]=n(w);s=e._elems[o];s.addClass("jqplot-point-label jqplot-series-"+this.index+" jqplot-point-"+o);s.css("position","absolute");s.insertAfter(r.canvas);e.escapeHTML?s.text(h):s.html(h);a=e.location;(this.fillToZero&&v[o][1]<0||this.fillToZero&&this._type==="bar"&&this.barDirection==="horizontal"&&v[o][0]<0||(this.waterfall&&parseInt(h,10))<0)&&(a=i[t[a]]);c=g.u2p(v[o][0])+e.xOffset(s,a);l=nt.u2p(v[o][1])+e.yOffset(s,a);this._stack&&!e.stackedValue&&(this.barDirection==="vertical"?l=(this._barPoints[o][0][1]+this._barPoints[o][1][1])/2+f._gridPadding.top-.5*s.outerHeight(!0):c=(this._barPoints[o][2][0]+this._barPoints[o][0][0])/2+f._gridPadding.left-.5*s.outerWidth(!0));this.renderer.constructor==n.jqplot.BarRenderer&&(this.barDirection=="vertical"?c+=this._barNudge:l-=this._barNudge);s.css("left",c);s.css("top",l);var tt=c+s.width(),it=l+s.height(),y=e.edgeTolerance,k=n(r.canvas).position().left,d=n(r.canvas).position().top,rt=r.canvas.width+k,ut=r.canvas.height+d;(c-y<k||l-y<d||tt+y>rt||it+y>ut)&&s.remove();s=null;w=null}}};n.jqplot.postSeriesInitHooks.push(n.jqplot.PointLabels.init);n.jqplot.postDrawSeriesHooks.push(n.jqplot.PointLabels.draw)})(jQuery);