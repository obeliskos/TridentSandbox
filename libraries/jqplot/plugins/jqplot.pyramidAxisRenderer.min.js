(function(n){var r,u,t,i;for(n.jqplot.PyramidAxisRenderer=function(){n.jqplot.LinearAxisRenderer.call(this)},n.jqplot.PyramidAxisRenderer.prototype=new n.jqplot.LinearAxisRenderer,n.jqplot.PyramidAxisRenderer.prototype.constructor=n.jqplot.PyramidAxisRenderer,n.jqplot.PyramidAxisRenderer.prototype.init=function(t){this.position=null;this.drawBaseline=!0;this.baselineWidth=null;this.baselineColor=null;this.tickSpacingFactor=25;this._type="pyramid";this._splitAxis=!1;this._splitLength=null;this.category=!1;this._autoFormatString="";this._overrideFormatString=!1;n.extend(!0,this,t);this.renderer.options=t;this.resetDataBounds=this.renderer.resetDataBounds;this.resetDataBounds()},n.jqplot.PyramidAxisRenderer.prototype.resetDataBounds=function(){var n=this._dataBounds,t,r,f,u,i,e;for(n.min=null,n.max=null,r=0;r<this._series.length;r++)for(f=this._series[r],u=f._plotData,i=0,e=u.length;i<e;i++)this.name.charAt(0)==="x"?(t=u[i][1],(t!==null&&t<n.min||n.min===null)&&(n.min=t),(t!==null&&t>n.max||n.max===null)&&(n.max=t)):(t=u[i][0],(t!==null&&t<n.min||n.min===null)&&(n.min=t),(t!==null&&t>n.max||n.max===null)&&(n.max=t))},n.jqplot.PyramidAxisRenderer.prototype.draw=function(t,i){var o,e,u,r,f;if(this.show){for(this.renderer.createTicks.call(this,i),o=0,this._elem&&(this._elem.emptyForce(),this._elem=null),this._elem=n(document.createElement("div")),this._elem.addClass("jqplot-axis jqplot-"+this.name),this._elem.css("position","absolute"),this.name=="xaxis"||this.name=="x2axis"?this._elem.width(this._plotDimensions.width):this._elem.height(this._plotDimensions.height),this.labelOptions.axis=this.name,this._label=new this.labelRenderer(this.labelOptions),this._label.show&&(e=this._label.draw(t,i),e.appendTo(this._elem),e=null),u=this._ticks,f=0;f<u.length;f++)r=u[f],r.show&&r.showLabel&&!r.isMinorTick&&this._elem.append(r.draw(t,i));r=null;u=null}return this._elem},r=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],u={},t=0,i=r.length;t<i;t++)u[r[t]]=r[t];n.jqplot.PyramidAxisRenderer.prototype.createTicks=function(t){var y=this.ticks,a=this._dataBounds,c,s,e,f,p,ot,st=this.min,ht=this.max,o,i,g,rt,nt,h,w,b,l,ut,tt=null,v,ft,k,it,et,r,d;if(y.length){for(r=0,p=y.length;r<p;r++)o=y[r],i=new this.tickRenderer(this.tickOptions),n.isArray(o)?(i.value=o[0],i.label=o[1],i.setTick(o[0],this.name),this._ticks.push(i)):n.isPlainObject(o)?(n.extend(!0,i,o),i.axis=this.name,this._ticks.push(i)):(ut=typeof o=="string"?r+t.defaultAxisStart:o,i.value=ut,i.label=o,i.axis=this.name,this._ticks.push(i));if(this.numberTicks=y.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value,this.tickInterval=(this.max-this.min)/(this.numberTicks-1),this._options.tickInterval)for(ft=this._options.tickInterval,r=0;r<this.numberTicks;r++)r%ft!=0&&(this._ticks[r].isMinorTick=!0);else if(c=this.name.charAt(0)==="x"?this._plotDimensions.width:this._plotDimensions.height,l=Math.round(2+c/this.tickSpacingFactor),this.numberTicks>l){for(v=this.numberTicks-1,r=2;r<v;r++)if(v%r==0&&v/r<l){tt=r-1;break}if(tt!==null)for(k=1,r=1,p=this._ticks.length;r<p;r++)k<=tt?(this._ticks[r].show=!1,k+=1):k=1}if(v=[],this.category){for(this._ticks[0].showGridline=!1,this._ticks[0].showMark=!1,r=this._ticks.length-1;r>0;r--)i=new this.tickRenderer(this.tickOptions),i.value=this._ticks[r-1].value+this.tickInterval/2,i.label="",i.showLabel=!1,i.axis=this.name,this._ticks[r].showGridline=!1,this._ticks[r].showMark=!1,this._ticks.splice(r,0,i);i=new this.tickRenderer(this.tickOptions);i.value=this._ticks[0].value-this.tickInterval/2;i.label="";i.showLabel=!1;i.axis=this.name;this._ticks.unshift(i);i=new this.tickRenderer(this.tickOptions);i.value=this._ticks[this._ticks.length-1].value+this.tickInterval/2;i.label="";i.showLabel=!1;i.axis=this.name;this._ticks.push(i);this.tickInterval=this.tickInterval/2;this.numberTicks=this._ticks.length;this.min=this._ticks[0].value;this.max=this._ticks[this._ticks.length-1].value}}else{if(this.name.charAt(0)==="x")c=this._plotDimensions.width,it=Math.max(a.max,Math.abs(a.min)),et=Math.min(a.min,-it),s=et,e=it,f=e-s,this.tickOptions!=null&&this.tickOptions.formatString||(this._overrideFormatString=!0),g=30,rt=Math.max(c,g+1),nt=(rt-g)/300,h=n.jqplot.LinearTickGenerator(s,e,nt),w=s+f*(this.padMin-1),b=e-f*(this.padMax-1),(s<w||e>b)&&(w=s-f*(this.padMin-1),b=e+f*(this.padMax-1),h=n.jqplot.LinearTickGenerator(w,b,nt)),this.min=h[0],this.max=h[1],this.numberTicks=h[2],this._autoFormatString=h[3],this.tickInterval=h[4];else if(c=this._plotDimensions.height,s=a.min,e=a.max,ot=this._series[0],this._ticks=[],f=e-s,u[f]&&(f+=1,e+=1),this.max=e,this.min=s,l=Math.round(2+c/this.tickSpacingFactor),f+1<=l)this.numberTicks=f+1,this.tickInterval=1;else for(r=l;r>1;r--)if(f/(r-1)===Math.round(f/(r-1))){this.numberTicks=r;this.tickInterval=f/(r-1);break}for(this._overrideFormatString&&this._autoFormatString!=""&&(this.tickOptions=this.tickOptions||{},this.tickOptions.formatString=this._autoFormatString),r=0;r<this.numberTicks;r++)this.tickOptions.axis=this.name,d=this.min+this.tickInterval*r,this.name.charAt(0)==="x"&&(d=Math.abs(d)),this.tickOptions.value=this.min+this.tickInterval*r,i=new this.tickRenderer(this.tickOptions),i.label=i.prefix+i.formatter(i.formatString,d),this._ticks.push(i),this.name.charAt(0)==="x"&&t.axes.yMidAxis.show&&this.tickOptions.value===0&&(this._splitAxis=!0,this._splitLength=t.axes.yMidAxis.getWidth(),i=new this.tickRenderer(this.tickOptions),this._ticks.push(i),i.value=this.max/2e3);i=null}};n.jqplot.PyramidAxisRenderer.prototype.set=function(){var t=0,e=0,h=0,u,o,r,s=this._label==null?!1:this._label.show,f;if(this.show){for(o=this._ticks,i=o.length,u=0;u<i;u++)r=o[u],!r._breakTick&&r.show&&r.showLabel&&!r.isMinorTick&&(f=this.name.charAt(0)==="x"?r._elem.outerHeight(!0):r._elem.outerWidth(!0),f>t&&(t=f));if(this.name==="yMidAxis")for(u=0;u<i;u++)r=o[u],r._elem&&(f=(t-r._elem.outerWidth(!0))/2,r._elem.css("left",f));r=null;o=null;s&&(e=this._label._elem.outerWidth(!0),h=this._label._elem.outerHeight(!0));this.name==="xaxis"?(t=t+h,this._elem.css({height:t+"px",left:"0px",bottom:"0px"})):this.name==="x2axis"?(t=t+h,this._elem.css({height:t+"px",left:"0px",top:"0px"})):this.name==="yaxis"?(t=t+e,this._elem.css({width:t+"px",left:"0px",top:"0px"}),s&&this._label.constructor==n.jqplot.AxisLabelRenderer&&this._label._elem.css("width",e+"px")):this.name==="yMidAxis"?(f=t/2-e/2,this._elem.css({width:t+"px",top:"0px"}),s&&this._label.constructor==n.jqplot.AxisLabelRenderer&&this._label._elem.css({width:e,left:f,top:0})):(t=t+e,this._elem.css({width:t+"px",right:"0px",top:"0px"}),s&&this._label.constructor==n.jqplot.AxisLabelRenderer&&this._label._elem.css("width",e+"px"))}};n.jqplot.PyramidAxisRenderer.prototype.pack=function(t,i){var y,k,s,r,f,l,a,d;t=t||{};i=i||this._offsets;var c=this._ticks,v=this.max,o=this.min,p=i.max,h=i.min,w=this._label==null?!1:this._label.show;for(y in t)this._elem.css(y,t[y]);this._offsets=i;var u=p-h,e=v-o,b=this._splitLength;if(this._splitAxis?(u-=this._splitLength,this.p2u=function(n){return(n-h)*e/u+o},this.u2p=function(n){return n<=0?(n-o)*u/e+h:(n-o)*u/e+h+b},this.series_u2p=function(n){return n<=0?(n-o)*u/e:(n-o)*u/e+b},this.series_p2u=function(n){return n*e/u+o}):(this.p2u=function(n){return(n-h)*e/u+o},this.u2p=function(n){return(n-o)*u/e+h},this.name.charAt(0)==="x"?(this.series_u2p=function(n){return(n-o)*u/e},this.series_p2u=function(n){return n*e/u+o}):(this.series_u2p=function(n){return(n-v)*u/e},this.series_p2u=function(n){return n*e/u+v})),this.show)if(this.name.charAt(0)==="x"){for(s=0;s<c.length;s++)if(r=c[s],r.show&&r.showLabel){if(r.constructor==n.jqplot.CanvasAxisTickRenderer&&r.angle){l=this.name=="xaxis"?1:-1;switch(r.labelPosition){case"auto":f=l*r.angle<0?-r.getWidth()+r._textRenderer.height*Math.sin(-r._textRenderer.angle)/2:-r._textRenderer.height*Math.sin(r._textRenderer.angle)/2;break;case"end":f=-r.getWidth()+r._textRenderer.height*Math.sin(-r._textRenderer.angle)/2;break;case"start":f=-r._textRenderer.height*Math.sin(r._textRenderer.angle)/2;break;case"middle":f=-r.getWidth()/2+r._textRenderer.height*Math.sin(-r._textRenderer.angle)/2;break;default:f=-r.getWidth()/2+r._textRenderer.height*Math.sin(-r._textRenderer.angle)/2}}else f=-r.getWidth()/2;a=this.u2p(r.value)+f+"px";r._elem.css("left",a);r.pack()}w&&(k=this._label._elem.outerWidth(!0),this._label._elem.css("left",h+u/2-k/2+"px"),this.name=="xaxis"?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack())}else{for(s=0;s<c.length;s++)if(r=c[s],r.show&&r.showLabel&&!r.isMinorTick){if(r.constructor==n.jqplot.CanvasAxisTickRenderer&&r.angle){l=this.name=="yaxis"?1:-1;switch(r.labelPosition){case"auto":case"end":f=l*r.angle<0?-r._textRenderer.height*Math.cos(-r._textRenderer.angle)/2:-r.getHeight()+r._textRenderer.height*Math.cos(r._textRenderer.angle)/2;break;case"start":f=r.angle>0?-r._textRenderer.height*Math.cos(-r._textRenderer.angle)/2:-r.getHeight()+r._textRenderer.height*Math.cos(r._textRenderer.angle)/2;break;case"middle":f=-r.getHeight()/2;break;default:f=-r.getHeight()/2}}else f=-r.getHeight()/2;a=this.u2p(r.value)+f+"px";r._elem.css("top",a);r.pack()}w&&(d=this._label._elem.outerHeight(!0),this.name!=="yMidAxis"&&this._label._elem.css("top",p-u/2-d/2+"px"),this.name=="yaxis"?this._label._elem.css("left","0px"):this.name!=="yMidAxis"&&this._label._elem.css("right","0px"),this._label.pack())}c=null}})(jQuery);