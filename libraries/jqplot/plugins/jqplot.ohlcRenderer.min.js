(function(n){n.jqplot.OHLCRenderer=function(){n.jqplot.LineRenderer.call(this);this.candleStick=!1;this.tickLength="auto";this.bodyWidth="auto";this.openColor=null;this.closeColor=null;this.wickColor=null;this.fillUpBody=!1;this.fillDownBody=!0;this.upBodyColor=null;this.downBodyColor=null;this.hlc=!1;this.lineWidth=1.5;this._tickLength;this._bodyWidth};n.jqplot.OHLCRenderer.prototype=new n.jqplot.LineRenderer;n.jqplot.OHLCRenderer.prototype.constructor=n.jqplot.OHLCRenderer;n.jqplot.OHLCRenderer.prototype.init=function(t){var r,u,i;if(t=t||{},this.lineWidth=t.lineWidth||1.5,n.jqplot.LineRenderer.prototype.init.call(this,t),this._type="ohlc",r=this._yaxis._dataBounds,u=this._plotData,u[0].length<5)for(this.renderer.hlc=!0,i=0;i<u.length;i++)(u[i][2]<r.min||r.min==null)&&(r.min=u[i][2]),(u[i][1]>r.max||r.max==null)&&(r.max=u[i][1]);else for(i=0;i<u.length;i++)(u[i][3]<r.min||r.min==null)&&(r.min=u[i][3]),(u[i][2]>r.max||r.max==null)&&(r.max=u[i][2])};n.jqplot.OHLCRenderer.prototype.draw=function(t,i,r){var c=this.data,et=this._xaxis.min,ot=this._xaxis.max,g=0,nt=c.length,st=this._xaxis.series_u2p,y=this._yaxis.series_u2p,tt,v,w,d,h,p,it,e,u=this.renderer,f=r!=undefined?r:{},ht=f.shadow!=undefined?f.shadow:this.shadow,ct=f.fill!=undefined?f.fill:this.fill,lt=f.fillAndStroke!=undefined?f.fillAndStroke:this.fillAndStroke,o,l,b,k,a,ut,ft,rt,s;if(u.bodyWidth=f.bodyWidth!=undefined?f.bodyWidth:u.bodyWidth,u.tickLength=f.tickLength!=undefined?f.tickLength:u.tickLength,t.save(),this.show){for(s=0;s<c.length;s++)c[s][0]<et?g=s:c[s][0]<ot&&(nt=s+1);ut=this.gridData[nt-1][0]-this.gridData[g][0];ft=nt-g;try{rt=Math.abs(this._xaxis.series_u2p(parseInt(this._xaxis._intervalStats[0].sortedIntervals[0].interval,10))-this._xaxis.series_u2p(0))}catch(at){rt=ut/ft}for(u.candleStick?u._bodyWidth=typeof u.bodyWidth=="number"?u.bodyWidth:Math.min(20,rt/1.65):u._tickLength=typeof u.tickLength=="number"?u.tickLength:Math.min(10,rt/3.5),s=g;s<nt;s++)o=st(c[s][0]),u.hlc?(l=null,b=y(c[s][1]),k=y(c[s][2]),a=y(c[s][3])):(l=y(c[s][1]),b=y(c[s][2]),k=y(c[s][3]),a=y(c[s][4])),e={},u.candleStick&&!u.hlc?(h=u._bodyWidth,p=o-h/2,a<l?(u.wickColor?e.color=u.wickColor:u.downBodyColor&&(e.color=u.upBodyColor),v=n.extend(!0,{},f,e),u.shapeRenderer.draw(t,[[o,b],[o,a]],v),u.shapeRenderer.draw(t,[[o,l],[o,k]],v),e={},w=a,d=l-a,u.fillUpBody?e.fillRect=!0:(e.strokeRect=!0,h=h-this.lineWidth,p=o-h/2),u.upBodyColor&&(e.color=u.upBodyColor,e.fillStyle=u.upBodyColor),it=[p,w,h,d]):a>l?(u.wickColor?e.color=u.wickColor:u.downBodyColor&&(e.color=u.downBodyColor),v=n.extend(!0,{},f,e),u.shapeRenderer.draw(t,[[o,b],[o,l]],v),u.shapeRenderer.draw(t,[[o,a],[o,k]],v),e={},w=l,d=a-l,u.fillDownBody?e.fillRect=!0:(e.strokeRect=!0,h=h-this.lineWidth,p=o-h/2),u.downBodyColor&&(e.color=u.downBodyColor,e.fillStyle=u.downBodyColor),it=[p,w,h,d]):(u.wickColor&&(e.color=u.wickColor),v=n.extend(!0,{},f,e),u.shapeRenderer.draw(t,[[o,b],[o,k]],v),e={},e.fillRect=!1,e.strokeRect=!1,p=[o-h/2,l],w=[o+h/2,a],h=null,d=null,it=[p,w]),v=n.extend(!0,{},f,e),u.shapeRenderer.draw(t,it,v)):(tt=f.color,u.openColor&&(f.color=u.openColor),u.hlc||u.shapeRenderer.draw(t,[[o-u._tickLength,l],[o,l]],f),f.color=tt,u.wickColor&&(f.color=u.wickColor),u.shapeRenderer.draw(t,[[o,b],[o,k]],f),f.color=tt,u.closeColor&&(f.color=u.closeColor),u.shapeRenderer.draw(t,[[o,a],[o+u._tickLength,a]],f),f.color=tt)}t.restore()};n.jqplot.OHLCRenderer.prototype.drawShadow=function(){};n.jqplot.OHLCRenderer.checkOptions=function(n,t,i){i.highlighter||(i.highlighter={showMarker:!1,tooltipAxes:"y",yvalues:4,formatString:'<table class="jqplot-highlighter"><tr><td>date:<\/td><td>%s<\/td><\/tr><tr><td>open:<\/td><td>%s<\/td><\/tr><tr><td>hi:<\/td><td>%s<\/td><\/tr><tr><td>low:<\/td><td>%s<\/td><\/tr><tr><td>close:<\/td><td>%s<\/td><\/tr><\/table>'})}})(jQuery);