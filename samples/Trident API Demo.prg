{
  "progName": "Trident API Demo",
  "htmlText": "<h3>TridentDatabase API Test</h3>\n\n<p><i>This demo demonstrates the more 'future' proof way of interacting with the TridentDB. \nThe old API_ functions still work, however this new VAR_TRIDENT_API object will allow for \nswitching between several 'backends', such as the traditional indexeddb keystore or a web \nserviced based keystore. Since you need to set up your own keystore, this is more of an API \nsample than a demo.  See 'Storage Summary' or script/tridentdb.js for more info.</i></p>\n\n<button class=\"minimal\" onclick=\"modeTrident()\">TridentDb</button>\n<button class=\"minimal\" onclick=\"modeService()\">Service</button><br><br/>\n<label>Current Mode : </label><label id=\"lblMode\">Service</label><br/><br/>\n\n<table>\n<tr>\n    <td>\n        <select id=\"selAppKeys\" size=\"8\" style=\"font-size:14px; min-width:160px\" onclick=\"KeySelected()\"></select><br />\n        <button onclick=\"DeleteKey()\">Delete</button>\n    </td>\n    <td>\n        <table>\n            <tr>\n                <td>Key: </td>\n                <td><input id=\"txtKey\" /></td>\n            </tr>\n            <tr>\n                <td>Val: </td>\n                <td><input id=\"txtVal\" /></td>\n            </tr>\n            <tr>\n                <td colspan=\"2\">\n                    <button onclick=\"SaveKey()\">Save</button>\n                </td>\n            </tr>\n        </table>\n    </td>\n</tr>\n</table>\n\n",
  "scriptText": "// Recommended practice is to place variables in this object and then delete in cleanup\nvar sbv = {\n\ttest: null\n}\n\nfunction settingsChanged() {\n\talertify.log(\"settings changed\");\n}\n\nfunction EVT_CleanSandbox()\n{\n\tEVT_TridentChanged = null;\n}\n\nfunction EVT_TridentChanged()\n{\n\t$(\"#lblMode\").text(VAR_TRIDENT_API.mode);\n\tRefreshAppKeys();\n}\n\n$(document).ready(function () {\n\t$(\"#lblMode\").text(VAR_TRIDENT_API.mode);\n\tRefreshAppKeys();\n});\n\nfunction modeTrident() {\n\talertify.log(\"modeTrident\");\n\tVAR_TRIDENT_API.SwitchMode('trident');\n}\n\nfunction modeService() {\n\tif (VAR_TRIDENT_API.baseUrl == \"\") {\n    \talertify.error(\"You have not configured a Trident API service location in Storage Summary\");\n        return;\n    }\n    \n    alertify.log(\"modeService\");\n\tVAR_TRIDENT_API.SwitchMode('service');\n}\n\nfunction RefreshAppKeys() {\n\t$(\"#selAppKeys\").empty();\n        \n\tVAR_TRIDENT_API.GetAppKeys(\"TestAPI\", function(result) {\n\t\tfor (var idx = 0; idx < result.length; idx++) {\n\t\t\t$(\"#selAppKeys\").append($(\"<option></option>\").attr(\"value\", result[idx].id).text(result[idx].key));\n\t\t}\n\t});\n}\n\nfunction RefreshAllKeys() {\n\t$(\"#selAppKeys\").empty();\n        \n\tVAR_TRIDENT_API.GetAllKeys(function(result) {\n\t\tfor (var idx = 0; idx < result.length; idx++) {\n\t\t\t$(\"#selAppKeys\").append($(\"<option></option>\").attr(\"value\", result[idx].id).text(result[idx].key));\n\t\t}\n\t});\n}\n\nfunction KeySelected() {\n\tvar selkey = parseInt($(\"#selAppKeys\").val());\n\n\tVAR_TRIDENT_API.GetAppKeyById(selkey, function (result) {\n\t\t$(\"#txtKey\").val(result.key);\n\t\t$(\"#txtVal\").val(result.val);\n\t});\n}\n\nfunction SaveKey() {\n\tvar key = $(\"#txtKey\").val();\n\tvar val = $(\"#txtVal\").val();\n\n\tVAR_TRIDENT_API.SetAppKey(\"TestAPI\", key, val, function(result) {\n\t\tif (result.success) {\n\t\t\tRefreshAppKeys();\n\t\t}\n\t\telse {\n\t\t\talertify.error(\"error calling SetKey()\");\n\t\t}\n\t});\n}\n\nfunction DeleteKey() {\n\tvar selkey = parseInt($(\"#selAppKeys\").val());\n\n\tVAR_TRIDENT_API.DeleteAppKey(selkey, function(result) {\n\t\tif (result) {\n\t\t\tRefreshAppKeys();\n\t\t}\n\t\telse {\n\t\t\talertify.log(\"Error?\");\n\t\t}\n\t});\n}\n\nfunction TestGetAppKey() {\n\tVAR_TRIDENT_API.GetAppKey(\"TestAPI\", \"third\", function (result) {\n\t\tAPI_Inspect(result);\n\t});\n}\n    "
}