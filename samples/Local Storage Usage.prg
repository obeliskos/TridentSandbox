{
  "progName": "Local Storage Usage",
  "htmlText": "<style>\n    fieldset { \n        padding: 1em;\n        font:80%/1 sans-serif;\n        border:1px solid black; \n    }\n    label.lb4 {\n        float:left;\n        width:15%;\n        margin-right:0.5em;\n        padding-top:0.2em;\n        text-align:right;\n        font-weight:bold;\n    }\n\n    legend {\n        padding: 0.2em 0.5em;\n        border:1px solid black;\n        color:black;\n        font-size:90%;\n        text-align:right;\n    }\n\n</style>\n\n<h3>Local Storage Usage</h3>\n<table>\n    <tr>\n        <td>\n            <span id='spnTotalSize'></span>\n        </td>\n        <td>\n            <span id='spnKeySize'></span>\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <div id=\"chart1\" style=\"width:320px\"></div>\n        </td>\n        <td>\n            <select id=\"selLocalStorage\" size=12 onchange=\"selLSchanged()\" style=\"width:400px\"></select>\n        </td>\n    </tr>\n    <tr>\n        <td>\n        </td>\n        <td>\n        </td>\n    </tr>\n</table>\n\n<fieldset>\n    <legend>Local Storage Key Settings :</legend>\n    <textarea style=\"width:80%; height:160px;\" id='txtLocalStorageValue'></textarea>\n    <label class=\"lb4\" for=\"txtLocalStorageValue\">Key Value : </label><br/><br/>\n    <span style=\"float:left; margin-left:200px\">\n        <button class=\"minimal\" onclick=\"updateLS();\"><i class=\"fa fa-save\"></i> Update</button>\n        <button class=\"minimal\" onclick=\"deleteLS()\"><i class=\"fa fa-trash-o\"></i> Delete</button>\n    </span>\n</fieldset>",
  "scriptText": "var sbv = {\n    arrayLS : [],\n    plot1 : null\n};\n\nfunction EVT_CleanSandbox() {\n    delete sbv.arrayLS;\n\n    if (sbv.plot1) {\n        sbv.plot1.destroy();\n    }\n\n    delete sbv.plot1;\n}\n\nif (!localStorage) {\n    alertify.log(\"This sample only works in a hosted or appcache environment\");\n}\nelse {\n    if (localStorage.length === 0) {\n        alertify.log(\"Nothing in local storage... try running the loan calculator sample\");\n    }\n\n    loadLocalStorage();\n}\n\nfunction loadLocalStorage() {\n\n    // if already plotted, destroy old plot before replotting\n    if (sbv.plot1) {\n        sbv.plot1.destroy();\n    }\n\n    // clear array of [key,sizes]\n    sbv.arrayLS = [];\n\n    // repopulate the listbox while simulatenously building the arrayLS data for plot\n    $(\"#selLocalStorage\").html(\"\");\n\n    var totalSize = 0;\n\n    for (var i = 0; i < localStorage.length; i++) {\n        var keyName = localStorage.key(i);\n        var keySize = localStorage[localStorage.key(i)].length;\n\n        sbv.arrayLS.push([keyName, keySize]);\n\n        totalSize += keySize;\n\n        $('#selLocalStorage').append($('<option>', {\n            value: localStorage.key(i),\n            text: localStorage.key(i)\n        }));          \n    }\n\n    $(\"#spnTotalSize\").text(\"Total Size of Local Storage : \" + totalSize);\n\n    // now (re) plot the data we just accumulated\n    sbv.plot1 = jQuery.jqplot ('chart1', [sbv.arrayLS], \n                               { \n        seriesDefaults: {\n            renderer: jQuery.jqplot.PieRenderer, \n            rendererOptions: {\n                showDataLabels: true\n            }\n        }, \n        legend: { show:false, location: 'e' },\n        highlighter: {\n            show: true,\n            formatString:'%s', \n            tooltipLocation:'sw', \n            useAxesFormatters:false\n        }\n    });\n\n}\n\nfunction selLSchanged() {\n    var key = $(\"#selLocalStorage option:selected\").text();\n\n    $(\"#txtLocalStorageValue\").text(localStorage[key]);\n\n    $(\"#spnKeySize\").text(\"Size : \" + localStorage[key].length);\n}\n\nfunction deleteLS() {\n    var key = $(\"#selLocalStorage option:selected\").text();\n    if (key === \"\") {\n        alertify.error(\"You need to select key from the list before deleting\");\n        return;\n    }\n\n    alertify.confirm(\"Are you sure you want to delete key \" + key, function (e) {\n        if (e) {\n            // user clicked \"ok\"\n            localStorage.removeItem(key);\n            loadLocalStorage();\n        } \n    });\n\n}\n\nfunction updateLS() {\n    var key = $(\"#selLocalStorage option:selected\").text();\n    if (key === \"\") {\n        alertify.error(\"Select a key from the list before updating\");\n        return;\n    }\n\n    alertify.confirm(\"Are you sure you want to update key \" + key, function (e) {\n        if (e) {\n            // user clicked \"ok\"\n            localStorage[key] = $(\"#txtLocalStorageValue\").text();\n            loadLocalStorage();\n        } \n    });\n}\n"
}