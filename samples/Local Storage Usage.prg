{
  "progName": "Local Storage Usage",
  "htmlText": "<h3>Local Storage Usage</h3>\n<table>\n\t<tr>\n\t\t<td>\n\t\t\t<span id='spnKeySize'></span>\n\t\t</td>\n\t\t<td>\n\t\t\t<span id='spnTotalSize'></span>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\t<select id=\"selLocalStorage\" size=14 onchange=\"selLSchanged()\"></select>\n\t\t</td>\n\t\t<td>\n\t\t\t<div id=\"chart1\" style=\"height:300px; width:500px;\"></div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\t<button style=\"height:40px; width:120px\" onclick=\"deleteLS()\">Delete</button>\n\t\t</td>\n\t\t<td>\n\t\t\t<textarea rows='4' cols='50' id='txtLocalStorageValue'></textarea>\n\t\t</td>\n\t</tr>\n</table>",
  "scriptText": "var sbv = {\n\tarrayLS : [],\n\tplot1 : null\n}\n\nfunction EVT_CleanSandbox() {\n\tdelete sbv.arrayLS;\n\n\tif (sbv.plot1) {\n\t\tsbv.plot1.destroy();\n\t}\n\n\n\tdelete sbv.plot1;\n}\n\nif (!localStorage) {\n\talertify.log(\"This sample only works in a hosted or appcache environment\");\n}\nelse {\n\tif (localStorage.length == 0) {\n\t\talertify.log(\"Nothing in local storage... try running the loan calculator sample\");\n\t}\n    \n\tloadLocalStorage();\n}\n\nfunction loadLocalStorage() {\n    \n\t// if already plotted, destroy old plot before replotting\n\tif (sbv.plot1) {\n\t\tsbv.plot1.destroy();\n\t}\n    \n    // clear array of [key,sizes]\n    sbv.arrayLS = [];\n\n\t// repopulate the listbox while simulatenously building the arrayLS data for plot\n\t$(\"#selLocalStorage\").html(\"\");\n\t\n    var totalSize = 0;\n\n\tfor (var i = 0; i < localStorage.length; i++) {\n    \tvar keyName = localStorage.key(i);\n        var keySize = localStorage[localStorage.key(i)].length;\n        \n        sbv.arrayLS.push([keyName, keySize]);\n        \n        totalSize += keySize;\n        \n\t\t$('#selLocalStorage').append($('<option>', {\n   \t\t\tvalue: localStorage.key(i),\n   \t\t\ttext: localStorage.key(i)\n\t\t}));          \n\t}\n    \n    $(\"#spnTotalSize\").text(\"Total Size of Local Storage : \" + totalSize);\n\n\t// now (re) plot the data we just accumulated\n\tsbv.plot1 = jQuery.jqplot ('chart1', [sbv.arrayLS], \n    { \n      seriesDefaults: {\n        // Make this a pie chart.\n        renderer: jQuery.jqplot.PieRenderer, \n        rendererOptions: {\n          // Put data labels on the pie slices.\n          // By default, labels show the percentage of the slice.\n          showDataLabels: true,\n          dataLabels: ['label']\n\n        }\n      }, \n      legend: { show:true, location: 'e' }\n    }\n  );\n\n}\n\nfunction selLSchanged() {\n\tvar key = $(\"#selLocalStorage option:selected\").text();\n\n\t$(\"#txtLocalStorageValue\").text(localStorage[key]);\n    \n    $(\"#spnKeySize\").text(\"Size : \" + localStorage[key].length);\n}\n\nfunction deleteLS() {\n\tvar key = $(\"#selLocalStorage option:selected\").text();\n    if (key == \"\") {\n\t\talertify.error(\"You need to select key from the list before deleting\");\n\t\treturn;\n    }\n\n\talertify.confirm(\"Are you sure you want to delete key \" + key, function (e) {\n    \t\tif (e) {\n        \t\t// user clicked \"ok\"\n                localStorage.removeItem(key);\n    \t\t\tloadLocalStorage();\n    \t\t} \n\t});\n\t\n}\n"
}