{
  "progName": "Local Storage Usage",
  "htmlText": "<style>\nfieldset { \n\tpadding: 1em;\n    font:80%/1 sans-serif;\n\tborder:1px solid black; \n}\nlabel.lb4 {\n\tfloat:left;\n    width:15%;\n    margin-right:0.5em;\n    padding-top:0.2em;\n    text-align:right;\n    font-weight:bold;\n}\n\nlegend {\n    padding: 0.2em 0.5em;\n    border:1px solid black;\n    color:black;\n    font-size:90%;\n    text-align:right;\n}\n\n</style>\n\n<h3>Local Storage Usage</h3>\n<table>\n\t<tr>\n\t\t<td>\n\t\t\t<span id='spnTotalSize'></span>\n\t\t</td>\n\t\t<td>\n\t\t\t<span id='spnKeySize'></span>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\t<div id=\"chart1\" style=\"width:320px\"></div>\n\t\t</td>\n\t\t<td>\n\t\t\t<select id=\"selLocalStorage\" size=12 onchange=\"selLSchanged()\" style=\"width:400px\"></select>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t</td>\n\t\t<td>\n\t\t</td>\n\t</tr>\n</table>\n\n<fieldset>\n\t<legend>Local Storage Key Settings :</legend>\n\t<textarea style=\"width:80%; height:160px;\" id='txtLocalStorageValue'></textarea>\n    <label class=\"lb4\" for=\"txtLocalStorageValue\">Key Value : </label><br/><br/>\n\t<span style=\"float:left; margin-left:200px\">\n\t\t<button class=\"minimal\" onclick=\"updateLS();\"><i class=\"fa fa-save\"></i> Update</button>\n\t\t<button class=\"minimal\" onclick=\"deleteLS()\"><i class=\"fa fa-trash-o\"></i> Delete</button>\n\t</span>\n</fieldset>",
  "scriptText": "var sbv = {\n\tarrayLS : [],\n\tplot1 : null\n}\n\nfunction EVT_CleanSandbox() {\n\tdelete sbv.arrayLS;\n\n\tif (sbv.plot1) {\n\t\tsbv.plot1.destroy();\n\t}\n\n\n\tdelete sbv.plot1;\n}\n\nif (!localStorage) {\n\talertify.log(\"This sample only works in a hosted or appcache environment\");\n}\nelse {\n\tif (localStorage.length == 0) {\n\t\talertify.log(\"Nothing in local storage... try running the loan calculator sample\");\n\t}\n    \n\tloadLocalStorage();\n}\n\nfunction loadLocalStorage() {\n    \n\t// if already plotted, destroy old plot before replotting\n\tif (sbv.plot1) {\n\t\tsbv.plot1.destroy();\n\t}\n    \n    // clear array of [key,sizes]\n    sbv.arrayLS = [];\n\n\t// repopulate the listbox while simulatenously building the arrayLS data for plot\n\t$(\"#selLocalStorage\").html(\"\");\n\t\n    var totalSize = 0;\n\n\tfor (var i = 0; i < localStorage.length; i++) {\n    \tvar keyName = localStorage.key(i);\n        var keySize = localStorage[localStorage.key(i)].length;\n        \n        sbv.arrayLS.push([keyName, keySize]);\n        \n        totalSize += keySize;\n        \n\t\t$('#selLocalStorage').append($('<option>', {\n   \t\t\tvalue: localStorage.key(i),\n   \t\t\ttext: localStorage.key(i)\n\t\t}));          \n\t}\n    \n    $(\"#spnTotalSize\").text(\"Total Size of Local Storage : \" + totalSize);\n\n\t// now (re) plot the data we just accumulated\n\tsbv.plot1 = jQuery.jqplot ('chart1', [sbv.arrayLS], \n    { \n\t\tseriesDefaults: {\n          \trenderer: jQuery.jqplot.PieRenderer, \n          \trendererOptions: {\n            \tshowDataLabels: true\n\t\t\t}\n\t\t}, \n\t\tlegend: { show:false, location: 'e' },\n\t\thighlighter: {\n\t\t\tshow: true,\n\t\t\tformatString:'%s', \n\t\t\ttooltipLocation:'sw', \n\t\t\tuseAxesFormatters:false\n\t\t}\n\t});\n\n}\n\nfunction selLSchanged() {\n\tvar key = $(\"#selLocalStorage option:selected\").text();\n\n\t$(\"#txtLocalStorageValue\").text(localStorage[key]);\n    \n    $(\"#spnKeySize\").text(\"Size : \" + localStorage[key].length);\n}\n\nfunction deleteLS() {\n\tvar key = $(\"#selLocalStorage option:selected\").text();\n    if (key == \"\") {\n\t\talertify.error(\"You need to select key from the list before deleting\");\n\t\treturn;\n    }\n\n\talertify.confirm(\"Are you sure you want to delete key \" + key, function (e) {\n    \t\tif (e) {\n        \t\t// user clicked \"ok\"\n                localStorage.removeItem(key);\n    \t\t\tloadLocalStorage();\n    \t\t} \n\t});\n\t\n}\n\nfunction updateLS() {\n\tvar key = $(\"#selLocalStorage option:selected\").text();\n    if (key == \"\") {\n\t\talertify.error(\"Select a key from the list before updating\");\n\t\treturn;\n    }\n\n\talertify.confirm(\"Are you sure you want to update key \" + key, function (e) {\n    \t\tif (e) {\n        \t\t// user clicked \"ok\"\n                localStorage[key] = $(\"#txtLocalStorageValue\").text();\n    \t\t\tloadLocalStorage();\n    \t\t} \n\t});\n}\n"
}