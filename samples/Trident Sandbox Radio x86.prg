{
  "progName": "Trident Sandbox Radio x86",
  "htmlText": "<style>\na.readerLink:link { color: #FFFF99; text-decoration: none; font-size: 20pt; }\na.readerLink:hover { text-decoration: underline; color: #FFFF99; }\na.readerLink:visited { color: #FFFF99; }\n\na.readerLink2:link { color: #FFFF99; text-decoration: none; }\na.readerLink2:hover { text-decoration: underline; color: #FFFF99; }\na.readerLink2:visited { color: #FFFF99; }\n\nfieldset { \n\tpadding: 1em;\n    font:80%/1 sans-serif;\n\tborder:1px solid white; \n}\nlabel.lb4 {\n\tfloat:left;\n    width:25%;\n    margin-right:0.5em;\n    padding-top:0.2em;\n    text-align:right;\n    font-weight:bold;\n}\n\nlegend {\n    padding: 0.2em 0.5em;\n    border:1px solid white;\n    color:white;\n    font-size:90%;\n    text-align:right;\n}\n\n</style> \n<ul class=\"tnavlist\">\n<li class=\"tnavli\"><a class=\"tnava\" onclick=\"showDiv(1);\" href=\"javascript:void(0)\"><i class=\"fa fa-headphones\"></i> Listen</a></li>\n<li class=\"tnavli\"><a class=\"tnava\" onclick=\"showDiv(2);\" href=\"javascript:void(0)\"><i class=\"fa fa-wrench\"></i> Edit Stations</a></li>\n<li class=\"tnavli\"><a class=\"tnava\" onclick=\"showDiv(3);\" href=\"javascript:void(0)\"><i class=\"fa fa-info-circle\"></i> About</a></li>\n</ul>\n\n<div id=\"divHome\" style=\"color:#ddd;\">\n\t<h3 style=\"color:#ddd\">Trident Sandbox Radio</h3>\n\t<table width=\"100%\">\n    <tr>\n\t    <td>\n\t\t\t<ul id=\"mainListView\" class=\"tlist\"></ul><br/>\n\t\t</td>\n\t    <td align='center' style=\"width:420px;\">\n            <OBJECT id=playera height=230 width=400 classid=clsid:22D6F312-B0F6-11D0-94AB-0080C74C7E95> \n             <PARAM NAME=\"AutoStart\" VALUE=\"True\"> \n             <PARAM NAME=\"Balance\" VALUE=\"False\"> \n             <PARAM NAME=\"DisplaySize\" VALUE=\"True\"> \n             <PARAM NAME=\"Filename\" VALUE=\"\"> \n             <PARAM NAME=\"Mute\" VALUE=\"False\"> \n             <PARAM NAME=\"SelectionStart\" VALUE=\"False\"> \n             <PARAM NAME=\"SelectionEnd\" VALUE=\"False\"> \n             <PARAM NAME=\"ShowControls\" VALUE=\"True\"> \n             <PARAM NAME=\"ShowAudioControls\" VALUE=\"True\"> \n             <PARAM NAME=\"ShowDisplay\" VALUE=\"False\"> \n             <PARAM NAME=\"ShowPositionControls\" VALUE=\"False\"> \n             <PARAM NAME=\"Volume\" VALUE=\"1\"> \n             <PARAM NAME=\"AudioStream\" VALUE=\"True\"> \n             <PARAM NAME=\"AutoSize\" VALUE=\"False\"> \n             <PARAM NAME=\"AnimationAtStart\" VALUE=\"False\"> \n             <PARAM NAME=\"AllowScan\" VALUE=\"False\"> \n             <PARAM NAME=\"AllowChangeDisplaySize\" VALUE=\"False\"> \n             <PARAM NAME=\"AutoRewind\" VALUE=\"True\"> \n             <PARAM NAME=\"BaseURL\" VALUE=\"\"> \n             <PARAM NAME=\"BufferingTime\" VALUE=\"6\"> \n             <PARAM NAME=\"CaptioningID\" VALUE=\"\"> \n             <PARAM NAME=\"ClickToPlay\" VALUE=\"True\"> \n             <PARAM NAME=\"CursorType\" VALUE=\"0\"> \n             <PARAM NAME=\"CurrentPosition\" VALUE=\"True\"> \n             <PARAM NAME=\"CurrentMarker\" VALUE=\"True\"> \n             <PARAM NAME=\"DefaultFrame\" VALUE=\"mainframe\"> \n             <PARAM NAME=\"DisplayBackColor\" VALUE=\"True\"> \n             <PARAM NAME=\"DisplayForeColor\" VALUE=\"16777215\"> \n             <PARAM NAME=\"DisplayMode\" VALUE=\"1\"> \n             <PARAM NAME=\"Enabled\" VALUE=\"-1\"> \n             <PARAM NAME=\"EnableContextMenu\" VALUE=\"True\"> \n             <PARAM NAME=\"EnablePositionControls\" VALUE=\"False\"> \n             <PARAM NAME=\"EnableFullScreenControls\" VALUE=\"True\"> \n             <PARAM NAME=\"EnableTracker\" VALUE=\"False\"> \n             <PARAM NAME=\"InvokeURLs\" VALUE=\"False\"> \n             <PARAM NAME=\"Language\" VALUE=\"False\"> \n             <PARAM NAME=\"PlayCount\" VALUE=\"1\"> \n             <PARAM NAME=\"PreviewMode\" VALUE=\"False\"> \n             <PARAM NAME=\"ShowStatusBar\" VALUE=\"True\"> \n             <PARAM NAME=\"TransparentAtStart\" VALUE=\"False\"> \n            </OBJECT>\n\t    </td>\n    </tr>\n    </table>\n\n\n</div>\n\n<div id=\"divStations\" style=\"color:#ddd; display:none\">\n<br/>\n\t<div id=\"divRadioWarn\" style=\"color:#ddd; display:none\">\n\t\t<p>Since you are running local filesystem version, the list is hardcoded.  To \n    \t\tmanage the feeds, you should edit the feed list array at the top of the script</p>\n    </div>\n    \n\t<ul id=\"stationListView\" class=\"tlist\"></ul><br/>\n    \n\t<button class=\"shiny-blue\" onclick=\"addStation()\"><i class=\"fa fa-plus\"></i> Add</button>&nbsp;\n\t<button class=\"shiny-blue\" onclick=\"editStation()\"><i class=\"fa fa-pencil-square-o\"></i> Edit</button>&nbsp;\n\t<button class=\"shiny-blue\" onclick=\"deleteStation()\"><i class=\"fa fa-trash-o\"></i> Delete</button>\n\t<button class=\"shiny-blue\" onclick=\"saveStations()\"><i class=\"fa fa-save\"></i> Save to DB</button>\n    <br/><br/>\n    <div id=\"divEditStation\" style=\"display:none; background-color:#555; color:#ddd; padding:20px; font-size:20px;\">\n\t\t<input type=\"hidden\" id=\"hfStationId\"/>\n\t\t<fieldset>\n        <legend>Feed Settings</legend>\n        <label class=\"lb4\" for=\"txtStationName\">Feed Name : </label>\n        <input type=\"text\" id=\"txtStationName\" style=\"width:260px\"/>\n        <br/><br/>\n        <label class=\"lb4\" for=\"txtStationUrl\">Feed Url : </label>\n        <input type=\"text\" id=\"txtStationUrl\" style=\"width:400px\" />\n        <br/><br/><br/>\n        \n        <span style=\"float:right\">\n\t\t<button class=\"shiny-blue\" onclick=\"saveStation()\"><i class=\"fa fa-save\"></i> Save</button>&nbsp;\n\t\t<button class=\"shiny-blue\" onclick=\"$('#divEditStation').hide();\"><i class=\"fa fa-ban\"></i> Cancel</button>\n        </span>\n        </fieldset>\n    </div>\n    \n</div>\n\n<div id=\"divAbout\" style=\"color:#ddd; display:none\">\n\t<h3 style=\"color:#ddd\">Trident Sandbox Radio <i class=\"fa fa-volume-up\"></i> </h3>\n    \n    <p>This application currently only works correctly on x86 windows because of its \n    use of embedding Windows Media Player activeX object.  WMP is great at handling \n    streaming radio, unfortunately it is not available on ARM.  I pursued using \n    javascript libraries like jPlayer with very limited success.  Should a good \n    cross platform solution present itself, i will adapt this example to use that.</p>\n    \n    <p>This application works best with hosted or appcache version so that feed list \n    \tcan be saved into the TridentDB.  If you are running local filesystem version, \n        you will have to just edit the rssurls array at the top of the script.</p>\n        \n\t<p>For Hosted/AppCache, some stations may require 'Making data request <a class=\"readerLink2\" href=\"docs/HostingAndAppCache.htm\" target=\"_blank\">workaround</a>...' \n    in place.</p>\n</div>",
  "scriptText": "var sbv = {\n\t// This is the default set of sites to show... if you are running local filesystem\n    // you will need to edit this to add/remove sites\n\tstationurls : [\t{ Name: \"KROQ\", Url : \"http://208.80.54.77:80/KROQHD2CMP3\" },\n\t\t\t\t{ Name: \"Greek Radio Thalassa\", Url : \"http://82.197.165.143:80\" },\n\t\t\t\t{ Name: \"PHISH Radio\", Url : \"http://209.234.243.40:8002\" },\n\t\t\t\t{ Name: \"Fam Friendy Christian\", Url : \"http://66.225.205.47:80\" },\n\t\t\t\t{ Name: \"Good Time Oldies\", Url : \"http://69.4.232.112:8166\" },\n\t\t\t\t{ Name: \"CINEMIX\", Url : \"http://www.streamlicensing.com/stations/cinemix/cine.asx\" },\n\t\t\t\t{ Name: \"1.FM Movie Soundtrack Hits\", Url : \"http://205.164.62.15:10108\" },\n\t\t\t\t{ Name: \"Stace Station Soma\", Url : \"http://somafm.com/wma128/spacestation.asx\" },\n\t\t\t\t{ Name: \"Underground 80s\", Url : \"http://somafm.com/wma128/u80s.asx\" },\n\t\t\t\t{ Name: \"Soma FM DefCon\", Url : \"http://somafm.com/wma128/events.asx\" },\n\t\t\t\t{ Name: \"BAGel Radio\", Url : \"http://somafm.com/wma128/bagel.asx\" },\n\t\t\t\t{ Name: \"BoAB 1\", Url : \"http://stream1.u7radio.org:8000\" },\n\t\t\t\t{ Name: \"BoAB 2\", Url : \"http://stream2.u7radio.org:8000\" },\n\t\t\t\t{ Name: \"BoAB 3\", Url : \"http://stream3.u7radio.org:8000\" }\n                ],\n                \n    mainListView : null,\n    stationListView : null,\n\n\tdb: new loki('StationDb'),\n\tstations: null\n};\n\nfunction EVT_CleanSandbox() {\n\tdocument.all.playera.Filename = \"\";\n\tsbv = null\n    EVT_CleanSandbox = null;\n}\n\nfunction EVT_WindowResize() {\n    switch (VAR_TRIDENT_ENV_TYPE) {\n        case \"IDE\" : $(\".tlist\").height($(window).height() - 400); break;\n        case \"SBL\" : $(\".tlist\").height($(window).height() - 200); break;\n        case \"STANDALONE\" : $(\".tlist\").height($(window).height() - 200); break;\n        default : break;\n    }\n}\n\n// navlist handler to show/hide tabs\nfunction showDiv(id) {\n\t$(\"#divHome\").hide();\n    $(\"#divStations\").hide();\n    $(\"#divAbout\").hide();\n    \n    switch (id) {\n    \tcase 1 : $(\"#divHome\").show(); break;\n        case 2 : $(\"#divStations\").show(); break;\n        case 3 : $(\"#divAbout\").show(); break;\n    }\n}\n\nfunction loadStation(sender, id) {\n    document.all.playera.Filename=id;\n}\n\nfunction initTridentDb() {\n\tsbv.stations = sbv.db.addCollection('stations', 'stations');\n\n\tfor (idx = 0; idx < sbv.stationurls.length; idx++) {\n\t\tvar obj = sbv.stationurls[idx];\n\n\t\tsbv.stations.insert(obj);\n\t}\n}\n\nfunction showStationsInDb() {\n\tsbv.mainListView.clearList();\n    sbv.stationListView.clearList();\n    \n\tfor (idx = 0; idx < sbv.stations.data.length; idx++) {\n    \tvar obj = sbv.stations.data[idx];\n        \n        // use url for key on main list, but id for key on stations list\n\t\tsbv.mainListView.addListItem(obj.Url, obj.Name, obj.Url);\n        sbv.stationListView.addListItem(obj.$loki, obj.Name, obj.Url);\n    }\n    \n    EVT_WindowResize();\n}\n\nfunction radioInit() {\n\tAPI_SetBackgroundColor(\"#444\");\n    \n\tsbv.mainListView = new TridentList(\"mainListView\", loadStation);\n\n    if (VAR_TRIDENT_DB) {\n\t\t$(\"#divRadioWarn\").hide();\t// hide warning intended for local filesystem users\n\t\tsbv.stationListView = new TridentList(\"stationListView\", stationDivCallback);\n        \n\t\tAPI_GetIndexedAppKey('TridentRadioApp', 'StationData', function(e) {\n\t\t\tvar res = e.target.result;\n        \n        // if no data then just load up the default hardcoded data\n        if (!res) {\n            initTridentDb();\n            showStationsInDb();\n            return;\n        }\n        \n      \tsbv.db.loadJSON(res.val);\n\n\t\t// we rehydrated loki db object and collections but old collection references still\n  \t\t// point to old db object. \n\t\tsbv.stations = sbv.db.getCollection(\"stations\");\n        \n\t\tshowStationsInDb();\n      });\n      \n    }\n\telse {\n        for (idx = 0; idx < sbv.stationurls.length; idx++) {\n            var obj = sbv.stationurls[idx];\n\n            sbv.mainListView.addListItem(obj.Url, obj.Name, obj.Url);\n        }\n    }\n}\n\nfunction stationDivCallback(sender, id) {\n\t$(\"#divEditFeed\").hide();\n}\n\nfunction addStation() {\n\t$(\"#hfStationId\").val(\"\");\n    $(\"#txtStationName\").val(\"\");\n    $(\"#txtStationUrl\").val(\"\");\n    $(\"#divEditStation\").show();\n}\n\nfunction editStation() {\n\tvar selId = sbv.stationListView.listSettings.selectedId;\n    \n\tif (selId == null) return;\n    \n    var stationObj = sbv.stations.get(selId);\n    \n\t$(\"#hfStationId\").val(sbv.stationListView.listSettings.selectedId);\n    $(\"#txtStationName\").val(stationObj.Name);\n    $(\"#txtStationUrl\").val(stationObj.Url);\n    $(\"#divEditStation\").show();\n}\n\nfunction deleteStation() {\n\n\tvar selId = sbv.stationListView.listSettings.selectedId;\n    \n\tif (selId == null) return;\n\n\talertify.confirm(\"Are you sure you want to delete this station?\", function (e) {\n\t\tif (e) {\n\t\t\tsbv.stations.remove(sbv.stations.get(selId));\n\n\t\t\tshowStationsInDb();\n\t\t} \n\t});\n    \n}\n\nfunction saveStation() {\n\tvar stationId = $(\"#hfStationId\").val();\n    \n    var stationName = $(\"#txtStationName\").val();\n    var stationUrl = $(\"#txtStationUrl\").val();\n    \n    if (stationName == \"\") alertify.error(\"Station Name is required\");\n    if (stationUrl == \"\") alertify.error(\"Station Url is required\");\n    \n    if (stationName == \"\" || stationUrl == \"\") return;\n    \n    if (stationId == \"\") {\n    \t// Adding\n    \tvar obj = { Name : stationName, Url : stationUrl };\n\t\tsbv.stations.insert(obj);\n        \n\t\tshowStationsInDb();\n    \t$(\"#divEditStation\").hide();\n    }\n    else {\n    \t// Updating\n    \tvar stationObj = sbv.stations.get(parseInt(stationId));\n\n\t\tstationObj.Name = stationName;\n        stationObj.Url = stationUrl;\n        \n\t\tshowStationsInDb();\n        \n    \t$(\"#divEditStation\").hide();\n        alertify.log(\"Don't forget to Save to DB when done.\");\n    }\n}\n\nfunction saveStations() {\n\tif(VAR_TRIDENT_DB) {\n      \tAPI_SetIndexedAppKey('TridentRadioApp', 'StationData', JSON.stringify(sbv.db))\n  \t}\n  \telse {\n\t\talertify.log(\"Trident Database is not available.\");\n\t}\n\n}\n\n// This program is not cross platform, it is x86 only\nvar isARM = (navigator.userAgent.indexOf(\"ARM;\") != -1);\nif (isARM) { \n\talertify.error(\"This program does not work on arm... see Text Log for details\");\n    API_LogMessage(\"This program uses Windows Media Player embed to handle streams.  This ActiveX control does not exist on any ARM distribution\");\n}\n\nradioInit();"
}