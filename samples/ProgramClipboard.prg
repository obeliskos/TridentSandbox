{
  "progName": "ProgramClipboard",
  "htmlText": "<ul class=\"tnavlist\">\n<li class=\"tnavli\"><a class=\"tnava\" onclick=\"showDiv(1);\" href=\"javascript:void(0)\"><i class=\"fa fa-home\"></i> Home</a></li>\n<li class=\"tnavli\"><a class=\"tnava\" onclick=\"showDiv(2);\" href=\"javascript:void(0)\"><i class=\"fa fa-upload\"></i> Import</a></li>\n<li class=\"tnavli\"><a class=\"tnava\" onclick=\"showDiv(3);\" href=\"javascript:void(0)\"><i class=\"fa fa-download\"></i> Export</a></li>\n</ul>\n\n<div id=\"divHome\">\n    <br/>\n    <h3>Trident Sandbox program clipboard</h3>\n    <p>\n    This program allows you to import and export a program via copy/paste.&nbsp;\n    This feature might be useful for installing your program(s) on constrained environments like phones.\n    </p>\n\n    <ul>\n        <li>If you want to (paste) import a program, go to the IMPORT tab</li>\n        <li>If you want to (copy) export a program, go to the EXPORT tab</li>\n    </ul>\n    <br/>\n    <p><i>Other options for moving programs between separate Trident Sandbox installations :</i></p>\n    <ul>\n    <li>Save to .PRG file / Load from .PRG file</li>\n    <li>Trident DB Backup and restore utility (in Samples Browser)</li>\n    <li>Or <b>this</b> 'Program Clipboard' program for copy / paste to another app or email</li>\n    </ul>\n\n</div>\n\n<div id=\"divImport\" style=\"display:none\">\n    <br/>\n\t<h3>Import (Paste)</h3>\n    <br/>\n\t<label>Enter PRG file contents (JSON) :</label><br/>\n\t<textarea spellcheck='false' id=\"txtImport\" rows=\"15\" cols=\"80\"></textarea><br/>\n    <button class=\"minimal\" onclick=\"doImport()\"><i class=\"fa fa-plus\"></i> Import</button>\n    <button class=\"minimal\" onclick=\"$('#txtImport').text('');\">Clear</button>\n</div>\n\n<div id=\"divExport\" style=\"display:none\">\n    <br/>\n\t<h3>Export (Copy)</h3>\n    <br/>\n\t<label>Select program slot to view its JSON file contents (for copying) :</label><br/>\n    <select style=\"height:24px; font-size: 14px;\" id='selTridentSlots' onchange=\"doLoadSlot()\"></select><br/>\n\t<textarea spellcheck='false' id=\"txtExport\" rows=\"15\" cols=\"80\"></textarea>\n</div>\n",
  "scriptText": "// Recommended practice is to place variables in this object and then delete in cleanup\nvar sbv = {\n\tmyVar : null,\n\tmyVar2 : 2\n}\n\nfunction EVT_CleanSandbox()\n{\n\tdelete sbv.myVar;\n\tdelete sbv.myVar2;\n}\n\nfunction showDiv(divIndex) {\n\t$(\"#divHome\").hide();\n\t$(\"#divImport\").hide();\n\t$(\"#divExport\").hide();\n\n\tswitch(divIndex) {\n        case 1: $(\"#divHome\").show(); break;\n        case 2: $(\"#divImport\").show(); break;\n        case 3: $(\"#divExport\").show(); break;\n    }\n}\n\nfunction doImport() {\n\tvar strJSON = $(\"#txtImport\").text();\n\tvar objJSON = JSON.parse(strJSON);\n    \n\talertify.prompt(\"Verify program name\", function (e, str) {\n\t\t// str is the input text\n\t\tif (e) {\n\t\t\t// user clicked \"ok\"\n            VAR_TRIDENT_API.SetAppKey(\"SandboxSaveSlots\", str, strJSON, function(result) {\n                if (result.success) {\n                    RefreshSlots();\n                    alertify.log(\"program imported\");\n                }\n                else {\n                    alert(\"error calling SetKey()\");\n                }\n            });\n    \n\t\t} \n\t}, objJSON.progName);\n    \n}\n\nfunction doLoadSlot() {\n    var selText = $(\"#selTridentSlots\").find(\":selected\").text();\n\n    if (selText == \"\") return;\n\n    VAR_TRIDENT_API.GetAppKey(\"SandboxSaveSlots\", selText, function (result) {\n    \t$(\"#txtExport\").text(result.val);\n        $(\"#txtExport\").focus();\n        $(\"#txtExport\").select();\n    });\n}\n\nfunction RefreshSlots() {\n    $(\"#selTridentSlots\").html(\"<option></option>\");\n\n    VAR_TRIDENT_API.GetAppKeys(\"SandboxSaveSlots\", function(result) {\n      if (result != null) {\n        for(var idx=0; idx < result.length; idx++) {\n          $(\"#selTridentSlots\").append($(\"<option></option>\").attr(\"value\", result[idx].id).text(result[idx].key));\n        }\n\n        var my_options = $(\"#selTridentSlots option\");\n        my_options.sort(function(a,b) {\n          if (a.text > b.text) return 1;\n          else if (a.text < b.text) return -1;\n          else return 0\n            })\n            \n        $(\"#selTridentSlots\").empty().append( my_options );\n      }\n      else {\n        alertify.error(\"check database configuration\");\n      }\n    });\n}\n\nRefreshSlots();"
}